$.namespace("common.report.echarts"),Array.prototype.contains=function(e){for(var t=this.length;t--;)if(this[t]===e)return!0;return!1};var Echart={color:["#88e7fb","#6dc3ff","#2faaff","#2f7dff","#d156ff","#ea97ff","#7d7dff","#ffaf60","#fffa7d","#7ddc79"],ChartDataFormate:{FormateNOGroupData:function(e){common.utils.isArray(e)||(e=[]);for(var t=[],o=[],a=0;a<e.length;a++)t.push(e[a].name||""),o.push(e[a]);return{category:t,data:o}},FormatGroupData:function(e){common.utils.isArray(e)||(e=[]);for(var t=new Array,o=new Array,a=new Array,r=0;r<e.length;r++)t.contains(e[r].name)||t.push(e[r].name),o.contains(e[r].group)||o.push(e[r].group);for(r=0;r<o.length;r++){var i={},l=o[r],n=!0;o[r].endsWith("|hide")&&(n=!1,l=o[r].replace("|hide",""));for(var s=new Array,c=0;c<e.length;c++)for(var u=0;u<t.length;u++)o[r]==e[c].group&&e[c].name==t[u]&&s.push(e[c].value);i={name:l,data:s,visible:n},a.push(i)}return{category:t,groups:o,series:a}}},ChartOptionTemplates:{Pie:function(e,t){var o=Echart.ChartDataFormate.FormateNOGroupData(e),a=Echart.utils.createSeries(o.data,t,"Pie"),r={backgroundColor:t.backgroundColor,color:Echart.color,title:{text:t.title},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},visualMap:"",series:[a]};return t.isVisualMap&&(r.visualMap={show:!1,min:t.visualMap_min,max:t.visualMap_max,inRange:{colorLightness:[.2,1]}}),r},Bars:function(e,t){var o=Echart.ChartDataFormate.FormatGroupData(e),a=Echart.utils.createSeries(o.series,t,"Bars"),r={backgroundColor:t.backgroundColor,color:Echart.color,title:{text:t.title},tooltip:{trigger:"axis",axisPointer:{type:"shadow"}},legend:{show:t.isLegend,data:o.groups},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",data:o.category,splitLine:{lineStyle:{color:t.yAxis_sline_color}},axisLabel:{textStyle:{color:t.yAxis_label_color}},axisLine:{lineStyle:{color:t.yAxis_line_color}}},yAxis:{type:"value",splitLine:{lineStyle:{color:t.yAxis_sline_color}},axisLabel:{textStyle:{color:t.yAxis_label_color}},axisLine:{lineStyle:{color:t.yAxis_line_color}}},series:a};if(t.exchangeXY){var i=r.xAxis,l=r.yAxis;r.xAxis=l,r.yAxis=i}return r},Line:function(e,t){var o=Echart.ChartDataFormate.FormatGroupData(e),a=Echart.utils.createSeries(o.series,t,"Line"),r={backgroundColor:t.backgroundColor,color:Echart.color,title:{text:t.title},tooltip:{trigger:"axis"},legend:{show:t.isLegend,data:o.groups},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:o.category,splitLine:{lineStyle:{color:t.yAxis_sline_color}},axisLabel:{textStyle:{color:t.yAxis_label_color}},axisLine:{lineStyle:{color:t.yAxis_line_color}}},yAxis:{type:"value",splitLine:{lineStyle:{color:t.yAxis_sline_color}},axisLabel:{textStyle:{color:t.yAxis_label_color}},axisLine:{lineStyle:{color:t.yAxis_line_color}}},series:a};if(t.exchangeXY){var i=r.xAxis,l=r.yAxis;r.xAxis=l,r.yAxis=i}return r},Gauge:function(e,t){var o=Echart.ChartDataFormate.FormateNOGroupData(e),a=Echart.utils.createSeries(o.data,t,"Gauge");return{backgroundColor:t.backgroundColor,title:{text:t.title},tooltip:{formatter:"{a}</br> {b}: {c}%"},series:a}},Statter:function(e,t){var o=Echart.ChartDataFormate.FormatGroupData(e),a=Echart.utils.createSeries(o.series,t,"Statter");return{color:Echart.color,backgroundColor:t.backgroundColor,title:{text:t.title},legend:{show:t.isLegend,data:o.groups},visualMap:[{show:!1,dimension:2,max:t.visualMap_max,inRange:{symbolSize:[10,50]}}],tooltip:{padding:5,backgroundColor:"#222",borderColor:"#777",borderWidth:1,formatter:function(e){var o=t.schema,a=e.seriesName+"<br>";return $.each(e.value,function(e,t){a+=o[e]+" : "+t+"<br>"}),a}},xAxis:{name:t.xAxisName,nameTextStyle:{color:t.xAxis_text_color},splitLine:{lineStyle:{color:t.xAxis_sline_color,type:"dashed"}},axisLabel:{textStyle:{color:t.xAxis_label_color}},axisLine:{lineStyle:{color:t.xAxis_line_color}}},yAxis:{name:t.yAxisName,nameTextStyle:{color:t.yAxis_text_color},splitLine:{lineStyle:{color:t.yAxis_sline_color,type:"dashed"}},axisLabel:{formatter:"{value}%",textStyle:{color:t.yAxis_label_color}},axisLine:{lineStyle:{color:t.yAxis_line_color}},scale:!0},series:a}}},create:{init:function(container,data,option,type){var option_=Echart.utils.defaultOption(option);option_.container=container,option_.optionType=type;var opt=eval("Echart.ChartOptionTemplates."+type+"(data,option_)"),chart=echarts.init(document.getElementById(container));chart.setOption(opt);var obj={chart:chart,chartType:type,option:option_,data:data},id=common.report.highcharts.object.add(obj);return id},Pie:function(e,t,o){return this.init(e,t,o,"Pie")},Bars:function(e,t,o){return this.init(e,t,o,"Bars")},Line:function(e,t,o){return this.init(e,t,o,"Line")},Gauge:function(e,t,o){return this.init(e,t,o,"Gauge")},Statter:function(e,t,o){return this.init(e,t,o,"Statter")}},reload:function(e,t,o,a){},remove:function(e){},utils:{defaultOption:function(e){var t={title:"",backgroundColor:"",valueName:"数值",radius:"55%",pie_center:["50%","50%"],pie_item_color:"",pie_label_color:"#fff",pie_line_color:"#fff",pie_label_show:!0,visualMap_min:80,visualMap_max:600,pie_roseType:"",isLegend:!1,exchangeXY:!1,bar_stack:!1,gauge_center:[["50%","50%"]],gauge_title_color:"#9ED9E1",gauge_item_color:"#95ffff",gauge_detail_color:"#fff",gauge_split_color:"#96b5ff",gauge_axis_color:"#96b5ff",gauge_line_color:[[[.2,"#91c7ae"],[.8,"#ff1652"],[1,"#f0e126"]]],schema:[],yAxisName:"",yAxis_sline_color:"#fff",yAxis_line_color:"#fff",yAxis_label_color:"#fff",yAxis_text_color:"#fff",xAxisName:"",xAxis_sline_color:"#fff",xAxis_line_color:"#fff",xAxis_label_color:"#fff",xAxis_text_color:"#fff",isVisualMap:!1,doClick:"",doLoad:""};return common.utils.setDefaultOption(e,t)},getOption:function(data,option,type){var option_=Echart.utils.defaultOption(option),opt=eval("Echart.ChartOptionTemplates."+type+"(data,option_)");return opt},createSeries:function(e,t,o){var a={};switch(o){case"Pie":a={name:t.valueName,type:"pie",radius:t.radius,center:t.pie_center,data:e.sort(function(e,t){return e.value-t.value}),roseType:t.pie_roseType,label:{normal:{show:t.pie_label_show,textStyle:{color:t.pie_label_color}}},labelLine:{normal:{show:!0,lineStyle:{color:t.pie_line_color}}},itemStyle:{normal:{color:t.pie_item_color},emphasis:{shadowBlur:20,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}};break;case"Bars":a=[],$.each(e,function(e,o){var r={name:o.name,type:"bar",clockwise:!1,stack:t.bar_stack,label:{normal:{show:!0,position:"insideRight"}},data:o.data};a.push(r)});break;case"Line":a=[],$.each(e,function(e,t){var o={name:t.name,type:"line",stack:!0,smooth:!0,data:t.data};a.push(o)});break;case"Gauge":a=[],$.each(e,function(e,o){var r={name:t.valueName,type:"gauge",min:0,max:100,splitNumber:10,center:t.gauge_center[e],radius:t.radius,axisLine:{lineStyle:{color:t.gauge_line_color[e],width:3}},axisLabel:{textStyle:{color:t.gauge_axis_color}},axisTick:{length:7,lineStyle:{color:"auto"}},splitLine:{length:10,lineStyle:{width:3,color:t.gauge_split_color}},pointer:{width:5},title:{offsetCenter:[0,"90%"],textStyle:{fontSize:13,color:t.gauge_title_color}},itemStyle:{normal:{color:t.gauge_item_color}},detail:{show:!0,offsetCenter:[0,"25%"],formatter:"{value}%",textStyle:{fontSize:35,fontWeight:"bolder",color:t.gauge_detail_color}},data:o};a.push(r)});break;case"Statter":a=[],$.each(e,function(e,t){var o={name:t.name,data:t.data,type:"scatter"};a.push(o)})}return a}}};