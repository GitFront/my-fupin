$.namespace("common.report.highcharts"),Array.prototype.contains=function(t){for(var e=this.length;e--;)if(this[e]===t)return!0;return!1},Highcharts.setOptions({global:{useUTC:!1}});var Highchart={colors:["#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"],ChartDataFormate:{FormateNOGroupData:function(t){common.utils.isArray(t)||(t=[]);for(var e=[],o=[],a=0;a<t.length;a++)e.push(t[a].name||""),o.push([t[a].name,t[a].value||0]);return{category:e,data:o}},FormatGroupData:function(t){common.utils.isArray(t)||(t=[]);for(var e=new Array,o=new Array,a=new Array,i=0;i<t.length;i++)e.contains(t[i].name)||e.push(t[i].name),o.contains(t[i].group)||o.push(t[i].group);for(i=0;i<o.length;i++){var r={},n=o[i],l=!0;o[i].endsWith("|hide")&&(l=!1,n=o[i].replace("|hide",""));for(var s=new Array,c=0;c<t.length;c++)for(var p=0;p<e.length;p++)o[i]==t[c].group&&t[c].name==e[p]&&s.push(t[c].value);r={name:n,data:s,visible:l},a.push(r)}return{category:e,series:a}},FormatInvertedData:function(t){common.utils.isArray(t)||(t=[]);for(var e=new Array,o=new Array,a=new Array,i=0;i<t.length;i++)e.contains(t[i].y)||e.push(t[i].y),o.contains(t[i].group)||o.push(t[i].group);for(i=0;i<o.length;i++){var r={},n=o[i],l=!0;o[i].endsWith("|hide")&&(l=!1,n=o[i].replace("|hide",""));for(var s=new Array,c=0;c<t.length;c++)for(var p=0;p<e.length;p++)o[i]==t[c].group&&t[c].y==e[p]&&s.push([t[c].y,t[c].x]);r={name:n,data:s,visible:l},a.push(r)}return{category:e,series:a}},FormatTimeSeriesData:function(t,e){common.utils.isArray(t)||(t=[]);for(var o=new Array,a=new Array,i=e.time_irregular,r="area",n=0;n<t.length;n++)o.contains(t[n].group)||o.push(t[n].group);o.length>1&&(r="spline");for(n=0;n<o.length;n++){var l={},s="",c=new Array,p=new Array,u=!0,m=o[n],h=!0;if(o[n].endsWith("|hide")&&(h=!1,m=o[n].replace("|hide","")),i){for(d=0;d<t.length;d++)o[n]==t[d].group&&(c.contains(t[d].name)||(c.push(t[d].name),p.push([common.utils.getDate(t[d].name).getTime(),t[d].value])));l={type:r,name:m,data:p,visible:h}}else{for(var d=0;d<t.length;d++)o[n]==t[d].group&&(u&&(s=common.utils.getDate(t[d].name).getTime(),u=!1),p.push(t[d].value));l={type:r,name:m,pointStart:s,pointInterval:e.time_pointInterval,data:p,visible:h}}a.push(l)}return{series:a}},FormatBarLineData:function(t,e,o){common.utils.isArray(t)||(t=[]);for(var a=[],i=[],r=[],n=[],l=1;l<t.length;l++){a.contains(t[l].name)||a.push(t[l].name),r.push(t[l].value);var s=0;t[l].value!=t[l-1].value&&(s=0!=t[l-1].value?Math.round(100*(t[l].value/t[l-1].value-1)):100),n.push(s)}return i.push({name:e,color:"#4572A7",type:"column",yAxis:1,data:r,tooltip:{valueStuffix:""}}),i.push({name:o,color:"#89A54E",type:"spline",yAxis:1,data:n,tooltip:{valueStuffix:"%"}}),{series:i}}},ChartOptionTemplates:{Pie:function(container,data,opt){var pie_datas=Highchart.ChartDataFormate.FormateNOGroupData(data),option={chart:{renderTo:container,backgroundColor:"rgba(255, 255, 255, 0)",plotBorderColor:null,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:0,plotShadow:!1,type:"pie",events:{load:function(event){var funcName=opt.doLoad;common.utils.isFunction(funcName)&&eval(funcName+"(event.target)")}}},title:{text:opt.title||"",x:opt.title_x,y:opt.title_y},tooltip:{pointFormat:"{series.name}: <b>{point.percentage"+opt.percentDecimal+"}%</b> ({point.y"+opt.yDecimalf+"}"+opt.yUnit+")"},colors:opt.color,exporting:{enabled:opt.exporting},plotOptions:{pie:{allowPointSelect:!0,cursor:opt.cursor,dataLabels:{enabled:opt.dataLabels,distance:opt.pie_distance},borderWidth:0,showInLegend:!0,size:opt.pie_size,startAngle:opt.pie_startAngle,endAngle:opt.pie_endAngle,center:opt.pie_center},series:{point:{events:{click:function(){var funcName=opt.doClick;common.utils.isFunction(funcName)&&eval(funcName+"(this.name,this.x,this.y)")}}}}},legend:{layout:"vertical",enabled:opt.legend,align:"right",verticalAlign:"top",x:5,y:50,borderWidth:0,labelFormatter:function(){return this.name+"&nbsp"},useHTML:!0},series:[{name:opt.valueName||"",innerSize:opt.pie_innerSize,data:pie_datas.data}]};return option},DrillDownPie:function(t,e,o){return{chart:{type:"pie"},title:{text:o||"",x:opt.title_x,y:opt.title_y},subtitle:{text:"请点击饼图项看详细占比"},colors:opt.color,exporting:{enabled:opt.exporting},plotOptions:{series:{dataLabels:{enabled:opt.dataLabels,format:"{point.name}: {point.y:.1f}%"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'},series:[{name:e||"",colorByPoint:!0,data:(void 0).fir_data}],drilldown:{series:(void 0).series}}},Line:function(container,data,opt){var line_datas=Highchart.ChartDataFormate.FormatGroupData(data),option={chart:{renderTo:container,backgroundColor:"rgba(255, 255, 255, 0)",plotBorderColor:null,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:null,plotShadow:!1,type:"spline",zoomType:opt.zoomType,events:{load:function(event){var funcName=opt.doLoad;common.utils.isFunction(funcName)&&eval(funcName+"(event.target)")}}},title:{text:opt.title||"",x:opt.title_x,y:opt.title_y},subtitle:{text:""},colors:opt.color,exporting:{enabled:opt.exporting},xAxis:{title:{text:opt.xName||""},labels:{formatter:function(){return this.value+opt.xUnit}},min:opt.xMin,visible:opt.xVisible,allowDecimals:opt.xAllowDecimal,categories:line_datas.category},yAxis:{title:{text:opt.yName||""},min:opt.yMin,visible:opt.yVisible,allowDecimals:opt.yAllowDecimal,labels:{formatter:function(){return this.value+opt.yUnit}},plotLines:[{value:0,width:1,color:"#808080"}]},plotOptions:{spline:{marker:{enable:!1}},series:{cursor:opt.cursor,point:{events:{click:function(){var funcName=opt.doClick;common.utils.isFunction(funcName)&&eval(funcName+"(this.series.name,this.category,this.y)")}}}}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span> : <b>{point.y'+opt.yDecimalf+"} "+opt.yUnit+"</b><br/>",shared:!0,useHTML:!0,crosshairs:!0},legend:{enabled:opt.legend,layout:"horizontal",align:"center",verticalAlign:"bottom"},series:line_datas.series};return option},TimeSeriesLine:function(container,data,opt){var line_datas=Highchart.ChartDataFormate.FormatTimeSeriesData(data,opt),option={chart:{renderTo:container,backgroundColor:"rgba(255, 255, 255, 0)",plotBorderColor:null,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:null,plotShadow:!1,zoomType:"x",events:{load:function(event){var funcName=opt.doLoad;common.utils.isFunction(funcName)&&eval(funcName+"(event.target)")}}},title:{text:opt.title||"",x:opt.title_x,y:opt.title_y},subtitle:{text:""},colors:opt.color,exporting:{enabled:opt.exporting},xAxis:{title:{text:opt.xName||""},type:"datetime",visible:opt.xVisible,allowDecimals:opt.xAllowDecimal,tickInterval:opt.time_minRange},yAxis:{title:{text:opt.yName||""},min:opt.yMin,visible:opt.yVisible,allowDecimals:opt.yAllowDecimal,labels:{formatter:function(){return this.value+opt.yUnit}},plotLines:[{value:0,width:1,color:"#808080"}]},legend:{enabled:opt.legend,layout:"horizontal",align:"center",verticalAlign:"bottom"},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span> : <b>{point.y'+opt.yDecimalf+"} "+opt.yUnit+"</b><br/>",shared:!0,useHTML:!0,crosshairs:!0},plotOptions:{area:{fillColor:{linearGradient:{x1:0,y1:0,x2:0,y2:1},stops:[[0,Highcharts.getOptions().colors[0]],[1,Highcharts.Color(Highcharts.getOptions().colors[0]).setOpacity(0).get("rgba")]]},marker:{radius:2},lineWidth:1,states:{hover:{lineWidth:1}},threshold:null},spline:{marker:{radius:2},lineWidth:2,states:{hover:{lineWidth:2}},threshold:null},series:{cursor:opt.cursor,point:{events:{click:function(){var funcName=opt.doClick;common.utils.isFunction(funcName)&&eval(funcName+"(this.series.name,this.x,this.y)")}}}}},series:line_datas.series};return option},InvertedLine:function(container,data,opt){var line_datas=Highchart.ChartDataFormate.FormatInvertedData(data),option={chart:{renderTo:container,backgroundColor:"rgba(255, 255, 255, 0)",plotBorderColor:null,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:null,plotShadow:!1,type:"spline",inverted:!0,zoomType:opt.zoomType,events:{load:function(event){var funcName=opt.doLoad;common.utils.isFunction(funcName)&&eval(funcName+"(event.target)")}}},title:{text:opt.title||"",x:opt.title_x,y:opt.title_y},subtitle:{text:""},colors:opt.color,exporting:{enabled:opt.exporting},xAxis:{reversed:!1,title:{text:opt.xName||""},min:opt.xMin,visible:opt.xVisible,allowDecimals:opt.xAllowDecimal,labels:{formatter:function(){return this.value+opt.xUnit}},showLastLabel:!0},yAxis:{title:{text:opt.yName||""},min:opt.yMin,visible:opt.yVisible,allowDecimals:opt.yAllowDecimal,labels:{formatter:function(){return this.value+opt.yUnit}},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{headerFormat:"<b>{series.name}</b><br/>",pointFormat:"{point.x"+opt.xDecimalf+"} "+opt.xUnit+" :  {point.y"+opt.yDecimalf+"}"+opt.yUnit},plotOptions:{spline:{marker:{enable:!1}},series:{cursor:opt.cursor,point:{events:{click:function(){var funcName=opt.doClick;common.utils.isFunction(funcName)&&eval(funcName+"(this.series.name,this.category,this.y)")}}}}},legend:{enabled:opt.legend},series:line_datas.series};return option},Bars:function(container,data,opt){var bars_datas=Highchart.ChartDataFormate.FormatGroupData(data),option={chart:{renderTo:container,backgroundColor:"rgba(255, 255, 255, 0)",plotBorderColor:null,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:null,plotShadow:!1,type:opt.bars_horiz,zoomType:opt.zoomType,events:{load:function(event){var funcName=opt.doLoad;common.utils.isFunction(funcName)&&eval(funcName+"(event.target)")}}},title:{text:opt.title||"",x:opt.title_x,y:opt.title_y},subtitle:{text:""},colors:opt.color,exporting:{enabled:opt.exporting},credits:{enabled:!1},xAxis:{title:{text:opt.xName},min:opt.xMin,visible:opt.xVisible,allowDecimals:opt.xAllowDecimal,labels:{formatter:function(){return this.value+opt.xUnit}},categories:bars_datas.category},yAxis:{title:{text:opt.yName},min:opt.yMin,visible:opt.yVisible,allowDecimals:opt.yAllowDecimal,labels:{formatter:function(){return this.value+opt.yUnit}}},tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span> : <b>{point.y'+opt.yDecimalf+"}</b><br/>",shared:!0,useHTML:!0,crosshairs:!0},plotOptions:{bar:{dataLabels:{enabled:opt.dataLabels}},series:{cursor:opt.cursor,pointPadding:.2,borderWidth:0,point:{events:{click:function(){var funcName=opt.doClick;common.utils.isFunction(funcName)&&eval(funcName+"(this.series.name,this.category,this.y)")}}}}},legend:{enabled:opt.legend,layout:"horizontal",align:"center",verticalAlign:"bottom"},series:bars_datas.series};return option},StackBars:function(container,data,opt){var bars_datas=Highchart.ChartDataFormate.FormatGroupData(data),option={chart:{renderTo:container,backgroundColor:"rgba(255, 255, 255, 0)",plotBorderColor:null,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:null,plotShadow:!1,type:opt.bars_horiz,zoomType:opt.zoomType,events:{load:function(event){var funcName=opt.doLoad;common.utils.isFunction(funcName)&&eval(funcName+"(event.target)")}}},title:{text:opt.title||"",x:opt.title_x,y:opt.title_y},subtitle:{text:""},colors:opt.color,exporting:{enabled:opt.exporting},credits:{enabled:!1},xAxis:{title:{text:opt.xName||""},min:opt.xMin,visible:opt.xVisible,allowDecimals:opt.xAllowDecimal,labels:{formatter:function(){return this.value+opt.xUnit}},categories:bars_datas.category},yAxis:{title:{text:opt.yName||""},min:opt.yMin,visible:opt.yVisible,allowDecimals:opt.yAllowDecimal,labels:{formatter:function(){return this.value+opt.yUnit}}},legend:{enabled:opt.legend,layout:"horizontal",align:"center",verticalAlign:"bottom"},series:bars_datas.series},stack_option={};return stack_option=opt.stack_isPercent?{tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span> : <b>{point.y'+opt.yDecimalf+"}</b> ({point.percentage"+opt.percentDecimal+"}%)<br/>",shared:!0,crosshairs:!0},plotOptions:{series:{cursor:opt.cursor,stacking:"percent",dataLabels:{enabled:opt.dataLabels,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"},point:{events:{click:function(){var funcName=opt.doClick;common.utils.isFunction(funcName)&&eval(funcName+"(this.series.name,this.category,this.y)")}}}}}}:{tooltip:{formatter:function(){return this.x+"<br/><span>"+this.series.name+"</span> : <b>"+Number(this.y).toFixed(opt.yDecimal)+'</b><br/><span style="color:#F58221">Total</span> : <b>'+Number(this.point.stackTotal).toFixed(opt.yDecimal)+"</b>"}},plotOptions:{series:{stacking:"normal",dataLabels:{enabled:opt.dataLabels,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"},cursor:opt.cursor,point:{events:{click:function(){var funcName=opt.doClick;common.utils.isFunction(funcName)&&eval(funcName+"(this.series.name,this.category,this.y)")}}}}}},$.extend({},option,stack_option)},Gauge:function(container,data,opt){common.utils.isArray(data)||(data=[data]);var option={chart:{renderTo:container,backgroundColor:"rgba(255, 255, 255, 0)",plotBorderColor:null,plotBackgroundColor:null,plotBackgroundImage:null,plotBorderWidth:null,plotShadow:!1,type:"solidgauge",events:{load:function(event){var funcName=opt.doLoad;common.utils.isFunction(funcName)&&eval(funcName+"(event.target)")}}},title:null,exporting:{enabled:opt.exporting},pane:{center:["50%","95%"],size:"200%",startAngle:-90,endAngle:90,background:{backgroundColor:Highcharts.theme&&Highcharts.theme.background2||"#EEE",innerRadius:"60%",outerRadius:"100%",shape:"arc"}},tooltip:{enabled:!1},yAxis:{min:opt.gauge_min,max:opt.gauge_max,visible:opt.yVisible,title:{text:null},allowDecimals:opt.yAllowDecimal,stops:opt.gauge_stops,lineWidth:0,minorTickInterval:null,tickPixelInterval:400,tickWidth:0,labels:{enabled:!1,y:16}},plotOptions:{solidgauge:{dataLabels:{y:5,borderWidth:0,useHTML:!0}}},credits:{enabled:!1},series:[{name:opt.valueName||"",data:data,dataLabels:{format:'<div style="text-align:center"><span style="font-size:'+opt.gauge_valueSize+"px;color:"+(Highcharts.theme&&Highcharts.theme.contrastTextColor||"black")+'">{y}</span> <span style="font-size:'+opt.gauge_valueSize/5*3+'px;color:silver">'+opt.yUnit+"</span></div>"},tooltip:{valueSuffix:opt.yUnit||""}}]};return option},Pyramid:function(t,e,o){var a=Highchart.ChartDataFormate.FormateNOGroupData(t);return{chart:{type:"pyramid",marginRight:100},title:{text:o||"",x:-50},colors:opt.color,plotOptions:{series:{dataLabels:{enabled:!0,format:"<b>{point.name}</b> ({point.y"+opt.yDecimalf+"})",color:"black",softConnector:!0}}},legend:{enabled:!1},series:[{name:e||"",data:a.data}]}}},create:{init:function(container,data,option,type){var option_=Highchart.utils.defaultOption(option);option_.stats&&(data=Highchart.utils.dataStatistics(data,type)),"TimeSeriesLine"===type&&(option_.time_minRange=Highchart.utils.getTimeSeriesMinRange(data)),option_.container=container,option_.optionType=type;var opt=eval("Highchart.ChartOptionTemplates."+type+"(container,data,option_)"),chart=new Highcharts.Chart(opt),obj={chart:chart,chartType:type,option:option_,data:data},id=common.report.highcharts.object.add(obj);return id},Pie:function(t,e,o){return this.init(t,e,o,"Pie")},Line:function(t,e,o){return this.init(t,e,o,"Line")},InvertedLine:function(t,e,o){return this.init(t,e,o,"InvertedLine")},Bars:function(t,e,o){return this.init(t,e,o,"Bars")},StackBars:function(t,e,o){return this.init(t,e,o,"StackBars")},TimeSeriesLine:function(t,e,o){return this.init(t,e,o,"TimeSeriesLine")},Gauge:function(t,e,o){return this.init(t,e,o,"Gauge")}},reload:function(chartid,data,newOption,type){var obj=common.report.highcharts.object.get(chartid);if(null!=obj){var chart=obj.chart;chart.showLoading();var opt=obj.option,container=opt.container;common.utils.isDefined(type)||(type=opt.optionType),common.utils.isDefined(data)||(data=obj.data),common.utils.isDefined(newOption)&&(opt=Highchart.utils.defaultOption(newOption),opt.container=container,opt.optionType=type),opt.stats&&(data=Highchart.utils.dataStatistics(data,type)),"TimeSeriesLine"===type&&(opt.time_minRange=Highchart.utils.getTimeSeriesMinRange(data));var option=eval("Highchart.ChartOptionTemplates."+type+"(container,data,opt)");return chart.destroy(),chart.hideLoading(),chart=new Highcharts.Chart(option),obj.chart=chart,obj.option=opt,obj.data=data,common.report.highcharts.object.reset(chartid,obj),!0}return!1},remove:function(t){return!!common.report.highcharts.object.containsKey(t)&&(common.report.highcharts.object.remove(t),!0)},ajax:{init:function(t,e,o,a,i){var r=Highchart.create.init(t,[],a,i),n=common.report.highcharts.object.get(r),l=n.chart;return l.showLoading(),o=common.utils.strToJson(o),$.ajax({type:"POST",url:e,data:o,cache:!0,dataType:"json",success:function(t){Highchart.reload(r,t),l.hideLoading(),(n=common.report.highcharts.object.get(r)).url=e,n.parameters=o,common.report.highcharts.object.reset(r,n)}}),r},Pie:function(t,e,o,a){return this.init(t,e,o,a,"Pie")},Line:function(t,e,o,a){return this.init(t,e,o,a,"Line")},InvertedLine:function(t,e,o,a){return this.init(t,e,o,a,"InvertedLine")},Bars:function(t,e,o,a){return this.init(t,e,o,a,"Bars")},StackBars:function(t,e,o,a){return this.init(t,e,o,a,"StackBars")},TimeSeriesLine:function(t,e,o,a){return this.init(t,e,o,a,"TimeSeriesLine")},Gauge:function(t,e,o,a){return this.init(t,e,o,a,"Gauge")},reload:function(t,e,o,a){var i=common.report.highcharts.object.get(t);if(null==i)return!1;if(common.utils.isEmpty(e)){var r=i.data;return Highchart.reload(t,r,a)}var n=i.chart;n.showLoading(),common.utils.isEmpty(e)&&(e=i.url),common.utils.isEmpty(o)&&(o=i.parameters),o=common.utils.strToJson(o),$.ajax({type:"POST",url:e,data:o,cache:!0,dataType:"json",success:function(r){return Highchart.reload(t,r,a),n.hideLoading(),i=common.report.highcharts.object.get(t),i.url=e,i.parameters=o,common.report.highcharts.object.reset(t,i),!0}})}},mybatis:{Pie:function(t,e,o,a,i,r){var n=ctx+"/a/report/highchart/pieData/load",l={};return l.queryName=e,l.param=common.utils.strToJson(o),l.mapper=common.utils.strToJson(a),l.rowsValue=r,Highchart.ajax.init(t,n,l,i,"Pie")},Line:function(t,e,o,a,i,r,n){var l=ctx+"/a/report/highchart/groupData/load",s={};return s.queryName=e,s.param=common.utils.strToJson(o),s.mapper=common.utils.strToJson(a),s.hideGroup=r,s.rowsGroup=n,Highchart.ajax.init(t,l,s,i,"Line")},InvertedLine:function(t,e,o,a,i,r){var n=ctx+"/a/report/highchart/invertedLine/load",l={};return l.queryName=e,l.param=common.utils.strToJson(o),l.mapper=common.utils.strToJson(a),l.hideGroup=r,Highchart.ajax.init(t,n,l,i,"InvertedLine")},Bars:function(t,e,o,a,i,r,n){var l=ctx+"/a/report/highchart/groupData/load",s={};return s.queryName=e,s.param=common.utils.strToJson(o),s.mapper=common.utils.strToJson(a),s.hideGroup=r,s.rowsGroup=n,Highchart.ajax.init(t,l,s,i,"Bars")},StackBars:function(t,e,o,a,i,r,n){var l=ctx+"/a/report/highchart/groupData/load",s={};return s.queryName=e,s.param=common.utils.strToJson(o),s.mapper=common.utils.strToJson(a),s.hideGroup=r,s.rowsGroup=n,Highchart.ajax.init(t,l,s,i,"StackBars")},TimeSeriesLine:function(t,e,o,a,i,r,n){var l=ctx+"/a/report/highchart/groupData/load",s={};return s.queryName=e,s.param=common.utils.strToJson(o),s.mapper=common.utils.strToJson(a),s.hideGroup=r,s.rowsGroup=n,Highchart.ajax.init(t,l,s,i,"TimeSeriesLine")},Gauge:function(t,e,o,a,i,r){var n=ctx+"/a/report/highchart/gauge/load",l={};return l.queryName=e,l.param=common.utils.strToJson(o),l.mapper=common.utils.strToJson(a),l.decimal=r,Highchart.ajax.init(t,n,l,i,"Gauge")},reload:function(t,e,o,a,i){var r=common.report.highcharts.object.get(t);if(null!=r){var n=r.url,l=r.parameters;return common.utils.isEmpty(e)||(l.queryName=e),common.utils.isEmpty(o)||(l.param=common.utils.strToJson(o)),common.utils.isEmpty(a)||(l.mapper=common.utils.strToJson(a)),Highchart.ajax.reload(t,n,l,i)}return!1}},utils:{defaultOption:function(t){var e={title:"",title_x:0,title_y:0,color:Highchart.colors,bars_horiz:!1,valueName:"数值",xName:"",xMin:0,xUnit:"",xDecimal:0,xAllowDecimal:!0,xVisible:!0,yName:"",yMin:0,yUnit:"",yDecimal:0,yAllowDecimal:!0,yVisible:!0,stats:!1,pie_size:"85%",pie_distance:30,pie_startAngle:0,pie_endAngle:360,pie_center:["50%","50%"],pie_innerSize:"0%",stack_isPercent:!1,percentDecimal:2,dataLabels:!1,legend:!0,zoomType:"",time_minRange:12096e5,time_pointInterval:864e5,time_irregular:!0,gauge_max:100,gauge_min:0,gauge_stops:[.4,.6,.8],gauge_greatValue:"up",gauge_valueSize:12,exporting:!0,doClick:"",doLoad:""},o=common.utils.setDefaultOption(t,e);return o.xDecimalf=this.convertDecimal(o.xDecimal),o.yDecimalf=this.convertDecimal(o.yDecimal),o.percentDecimal=this.convertDecimal(o.percentDecimal),o.bars_horiz?o.bars_horiz="bar":o.bars_horiz="column",o.gauge_stops=this.convertStops(o.gauge_stops,o.gauge_greatValue),o.cursor="",common.utils.isFunction(o.doClick)&&(o.cursor="pointer"),o},convertDecimal:function(t){var e="";switch(t){case 1:e=":.1f";break;case 2:e=":.2f";break;case 3:e=":.3f";break;case 4:e=":.4f";break;default:e=":.0f"}return e},convertStops:function(t,e){var o=new Array,a=new Array;"down"==e?(a[0]="#55BF3B",a[1]="#DDDF0D",a[2]="#DF5353"):(a[0]="#DF5353",a[1]="#DDDF0D",a[2]="#55BF3B");for(var i=0;i<a.length;i++)o.push([t[i],a[i]]);return o},initSeries:function(t,e,o,a){for(;t.series.length>0;)t.series[0].remove(!1);switch(a){case"Pie":var i=Highchart.ChartDataFormate.FormateNOGroupData(e),r={name:o.valueName||"",data:i.data};t.addSeries(r,!1);break;case"Line":l=Highchart.ChartDataFormate.FormatGroupData(e);t.xAxis[0].setCategories(l.category,!1),$.each(l.series,function(e,o){t.addSeries(o,!1)});break;case"InvertedLine":l=Highchart.ChartDataFormate.FormatInvertedData(e);$.each(l.series,function(e,o){t.addSeries(o,!1)});break;case"Bars":case"StackBars":var n=Highchart.ChartDataFormate.FormatGroupData(e);t.xAxis[0].setCategories(n.category,!1),$.each(n.series,function(e,o){t.addSeries(o,!1)});break;case"TimeSeriesLine":var l=Highchart.ChartDataFormate.FormatTimeSeriesData(e,o.time_pointInterval);$.each(l.series,function(e,o){t.addSeries(o,!1)});break;case"Gauge":common.utils.isArray(e)||(e=[e]),t.options.series[0].data=e}return t.redraw(),t},getTimeSeriesMinRange:function(t){var e=864e5;if(!common.utils.isArray(t)||0===t.length)return e;for(var o="",a="",i="",r=0;r<t.length;r++)0===r?(o=t[0].group,a=t[0].name,i=t[0].name,0):o===t[r].group&&(t[r].name>i&&(i=t[r].name),0);var n="day";a.length>10&&(n="hour");var l=common.utils.getDateDiff(a,i,n);return e=this.countMinRange(l,9,n)},countMinRange:function(t,e,o){var a=0;if("hour"===o)if(t<=10)a=36e5;else if(t>10&&t<=24*e){i=t/e;t%e!=0&&i++,a=36e5*i}else if(t>24*e&&t<=24*e*7){i=t/(24*e);t%(24*e)!=0&&i++,a=24*i*36e5}else if(t>24*e*7&&t<=24*e*30){i=t/(24*e*7);t%(24*e*7)!=0&&i++,a=24*i*7*36e5}else if(t>24*e*30&&t<=24*e*365){i=t/(24*e*30);t%(24*e*30)!=0&&i++,a=24*i*30*36e5}else{i=t/(24*e*365);t%(24*e*365)!=0&&i++,a=24*i*365*36e5}else if(t<=10)a=864e5;else if(t>10&&t<=7*e){i=t/e;t%e!=0&&i++,a=24*i*36e5}else if(t>7*e&&t<=30*e){i=t/(7*e);t%(7*e)!=0&&i++,a=7*i*24*36e5}else if(t>30*e&&t<=365*e){i=t/(30*e);t%(30*e)!=0&&i++,a=30*i*24*36e5}else{var i=t/(365*e);t%(365*e)!=0&&i++,a=365*i*24*36e5}return a},dataStatistics:function(t,e){var o=!0;"Pie"===e&&(o=!1);for(var a=new Array,i=0;i<t.length;i++){var r=!1,n=t[i].name,l=t[i].value,s=t[i].group;if(o){for(c=0;c<a.length;c++)if(a[c].group===s&&a[c].name===n){a[c].value=a[c].value+l,r=!0;break}}else for(var c=0;c<a.length;c++)if(a[c].name===n){a[c].value=a[c].value+l,r=!0;break}if(!r){var p={};p.name=n,p.value=l,o&&(p.group=s),a.push(p)}}return a}}};