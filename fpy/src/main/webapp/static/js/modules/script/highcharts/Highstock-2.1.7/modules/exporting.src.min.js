!function(t){var e,n=t.Chart,o=t.addEvent,i=t.removeEvent,r=HighchartsAdapter.fireEvent,a=t.createElement,s=t.discardElement,l=t.css,p=t.merge,c=t.each,u=t.extend,h=t.splat,d=Math.max,g=document,m=window,x=t.isTouchDevice,y="px",f=t.Renderer.prototype.symbols,b=t.getOptions();u(b.lang,{printChart:"Print chart",downloadPNG:"Download PNG image",downloadJPEG:"Download JPEG image",downloadPDF:"Download PDF document",downloadSVG:"Download SVG vector image",contextButtonTitle:"Chart context menu"}),b.navigation={menuStyle:{border:"1px solid #A0A0A0",background:"#FFFFFF",padding:"5px 0"},menuItemStyle:{padding:"0 10px",background:"none",color:"#303030",fontSize:x?"14px":"11px"},menuItemHoverStyle:{background:"#4572A5",color:"#FFFFFF"},buttonOptions:{symbolFill:"#E0E0E0",symbolSize:14,symbolStroke:"#666",symbolStrokeWidth:3,symbolX:12.5,symbolY:10.5,align:"right",buttonSpacing:3,height:22,theme:{fill:"white",stroke:"none"},verticalAlign:"top",width:24}},b.exporting={type:"image/png",url:"http://export.highcharts.com/",buttons:{contextButton:{menuClassName:"highcharts-contextmenu",symbol:"menu",_titleKey:"contextButtonTitle",menuItems:[{textKey:"printChart",onclick:function(){this.print()}},{separator:!0},{textKey:"downloadPNG",onclick:function(){this.exportChart()}},{textKey:"downloadJPEG",onclick:function(){this.exportChart({type:"image/jpeg"})}},{textKey:"downloadPDF",onclick:function(){this.exportChart({type:"application/pdf"})}},{textKey:"downloadSVG",onclick:function(){this.exportChart({type:"image/svg+xml"})}}]}}},t.post=function(t,e,n){var o,i;i=a("form",p({method:"post",action:t,enctype:"multipart/form-data"},n),{display:"none"},g.body);for(o in e)a("input",{type:"hidden",name:o,value:e[o]},null,i);i.submit(),s(i)},u(n.prototype,{sanitizeSVG:function(t){return t.replace(/zIndex="[^"]+"/g,"").replace(/isShadow="[^"]+"/g,"").replace(/symbolName="[^"]+"/g,"").replace(/jQuery[0-9]+="[^"]+"/g,"").replace(/url\([^#]+#/g,"url(#").replace(/<svg /,'<svg xmlns:xlink="http://www.w3.org/1999/xlink" ').replace(/ (NS[0-9]+\:)?href=/g," xlink:href=").replace(/\n/," ").replace(/<\/svg>.*?$/,"</svg>").replace(/(fill|stroke)="rgba\(([ 0-9]+,[ 0-9]+,[ 0-9]+),([ 0-9\.]+)\)"/g,'$1="rgb($2)" $1-opacity="$3"').replace(/&nbsp;/g," ").replace(/&shy;/g,"­").replace(/<IMG /g,"<image ").replace(/<(\/?)TITLE>/g,"<$1title>").replace(/height=([^" ]+)/g,'height="$1"').replace(/width=([^" ]+)/g,'width="$1"').replace(/hc-svg-href="([^"]+)">/g,'xlink:href="$1"/>').replace(/ id=([^" >]+)/g,' id="$1"').replace(/class=([^" >]+)/g,'class="$1"').replace(/ transform /g," ").replace(/:(path|rect)/g,"$1").replace(/style="([^"]+)"/g,function(t){return t.toLowerCase()})},getSVG:function(e){var n,o,i,r,l,d,m,x,f=this,b=p(f.options,e);return g.createElementNS||(g.createElementNS=function(t,e){return g.createElement(e)}),o=a("div",null,{position:"absolute",top:"-9999em",width:f.chartWidth+y,height:f.chartHeight+y},g.body),m=f.renderTo.style.width,x=f.renderTo.style.height,l=b.exporting.sourceWidth||b.chart.width||/px$/.test(m)&&parseInt(m,10)||600,d=b.exporting.sourceHeight||b.chart.height||/px$/.test(x)&&parseInt(x,10)||400,u(b.chart,{animation:!1,renderTo:o,forExport:!0,width:l,height:d}),b.exporting.enabled=!1,delete b.data,b.series=[],c(f.series,function(t){(r=p(t.options,{animation:!1,enableMouseTracking:!1,showCheckbox:!1,visible:t.visible})).isInternal||b.series.push(r)}),e&&c(["xAxis","yAxis"],function(t){c(h(e[t]),function(e,n){b[t][n]=p(b[t][n],e)})}),n=new t.Chart(b,f.callback),c(["xAxis","yAxis"],function(t){c(f[t],function(e,o){var i=n[t][o],r=e.getExtremes(),a=r.userMin,s=r.userMax;!i||void 0===a&&void 0===s||i.setExtremes(a,s,!0,!1)})}),i=n.container.innerHTML,b=null,n.destroy(),s(o),i=this.sanitizeSVG(i),i=i.replace(/(url\(#highcharts-[0-9]+)&quot;/g,"$1").replace(/&quot;/g,"'")},getSVGForExport:function(t,e){var n=this.options.exporting;return this.getSVG(p({chart:{borderRadius:0}},n.chartOptions,e,{exporting:{sourceWidth:t&&t.sourceWidth||n.sourceWidth,sourceHeight:t&&t.sourceHeight||n.sourceHeight}}))},exportChart:function(e,n){var o=this.getSVGForExport(e,n);e=p(this.options.exporting,e),t.post(e.url,{filename:e.filename||"chart",type:e.type,width:e.width||0,scale:e.scale||2,svg:o},e.formAttributes)},print:function(){var t=this,e=t.container,n=[],o=e.parentNode,i=g.body,a=i.childNodes;t.isPrinting||(t.isPrinting=!0,r(t,"beforePrint"),c(a,function(t,e){1===t.nodeType&&(n[e]=t.style.display,t.style.display="none")}),i.appendChild(e),m.focus(),m.print(),setTimeout(function(){o.appendChild(e),c(a,function(t,e){1===t.nodeType&&(t.style.display=n[e])}),t.isPrinting=!1,r(t,"afterPrint")},1e3))},contextMenu:function(t,e,n,r,s,p,h){var g,m,x,f,b=this,v=b.options.navigation,w=v.menuItemStyle,S=b.chartWidth,k=b.chartHeight,E="cache-"+t,C=b[E],G=d(s,p),F=function(e){b.pointer.inClass(e.target,t)||m()};C||(b[E]=C=a("div",{className:t},{position:"absolute",zIndex:1e3,padding:G+y},b.container),g=a("div",null,u({MozBoxShadow:"3px 3px 10px #888",WebkitBoxShadow:"3px 3px 10px #888",boxShadow:"3px 3px 10px #888"},v.menuStyle),C),m=function(){l(C,{display:"none"}),h&&h.setState(0),b.openMenu=!1},o(C,"mouseleave",function(){x=setTimeout(m,500)}),o(C,"mouseenter",function(){clearTimeout(x)}),o(document,"mouseup",F),o(b,"destroy",function(){i(document,"mouseup",F)}),c(e,function(t){if(t){var e=t.separator?a("hr",null,null,g):a("div",{onmouseover:function(){l(this,v.menuItemHoverStyle)},onmouseout:function(){l(this,w)},onclick:function(){m(),t.onclick&&t.onclick.apply(b,arguments)},innerHTML:t.text||b.options.lang[t.textKey]},u({cursor:"pointer"},w),g);b.exportDivElements.push(e)}}),b.exportDivElements.push(g,C),b.exportMenuWidth=C.offsetWidth,b.exportMenuHeight=C.offsetHeight),f={display:"block"},n+b.exportMenuWidth>S?f.right=S-n-s-G+y:f.left=n-G+y,r+p+b.exportMenuHeight>k&&"top"!==h.alignOptions.verticalAlign?f.bottom=k-r-G+y:f.top=r+p-G+y,l(C,f),b.openMenu=!0},addButton:function(n){var o,i,r=this,a=r.renderer,s=p(r.options.navigation.buttonOptions,n),l=s.onclick,c=s.menuItems,h={stroke:s.symbolStroke,fill:s.symbolFill},d=s.symbolSize||12;if(r.btnCount||(r.btnCount=0),r.exportDivElements||(r.exportDivElements=[],r.exportSVGElements=[]),!1!==s.enabled){var g,m=s.theme,x=m.states,y=x&&x.hover,f=x&&x.select;delete m.states,l?g=function(){l.apply(r,arguments)}:c&&(g=function(){r.contextMenu(i.menuClassName,c,i.translateX,i.translateY,i.width,i.height,i),i.setState(2)}),s.text&&s.symbol?m.paddingLeft=t.pick(m.paddingLeft,25):s.text||u(m,{width:s.width,height:s.height,padding:0}),(i=a.button(s.text,0,0,g,m,y,f).attr({title:r.options.lang[s._titleKey],"stroke-linecap":"round"})).menuClassName=n.menuClassName||"highcharts-menu-"+r.btnCount++,s.symbol&&(o=a.symbol(s.symbol,s.symbolX-d/2,s.symbolY-d/2,d,d).attr(u(h,{"stroke-width":s.symbolStrokeWidth||1,zIndex:1})).add(i)),i.add().align(u(s,{width:i.width,x:t.pick(s.x,e)}),!0,"spacingBox"),e+=(i.width+s.buttonSpacing)*("right"===s.align?-1:1),r.exportSVGElements.push(i,o)}},destroyExport:function(t){var e,n,o=t.target;for(e=0;e<o.exportSVGElements.length;e++)(n=o.exportSVGElements[e])&&(n.onclick=n.ontouchstart=null,o.exportSVGElements[e]=n.destroy());for(e=0;e<o.exportDivElements.length;e++)n=o.exportDivElements[e],i(n,"mouseleave"),o.exportDivElements[e]=n.onmouseout=n.onmouseover=n.ontouchstart=n.onclick=null,s(n)}}),f.menu=function(t,e,n,o){return["M",t,e+2.5,"L",t+n,e+2.5,"M",t,e+o/2+.5,"L",t+n,e+o/2+.5,"M",t,e+o-1.5,"L",t+n,e+o-1.5]},n.prototype.callbacks.push(function(t){var n,i=t.options.exporting,r=i.buttons;if(e=0,!1!==i.enabled){for(n in r)t.addButton(r[n]);o(t,"destroy",t.destroyExport)}})}(Highcharts);