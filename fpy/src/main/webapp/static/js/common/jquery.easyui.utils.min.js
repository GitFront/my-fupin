var Page=$.extend({},Page);Page.utils={autoResize:function(t,e){function i(t,e){return e.indexOf("datagrid")>-1?t.datagrid("getPanel").parent().offset():e.indexOf("treegrid")>-1?t.treegrid("getPanel").parent().offset():t.offset()}function d(t,e,i){e.indexOf("tabs")>-1?(void 0==i.height&&(i.height=t.tabs("options").height),void 0==i.width&&(i.width=t.tabs("options").width),t.tabs("options").width=i.width,t.tabs("options").height=i.height,t.tabs("resize")):e.indexOf("accordion")>-1?(void 0==i.height&&(i.height=t.accordion("options").height),void 0==i.width&&(i.width=t.accordion("options").width),t.accordion("options").width=i.width,t.accordion("options").height=i.height,t.accordion("resize")):e.indexOf("datagrid")>-1?(void 0==i.height&&(i.height=t.datagrid("options").height),void 0==i.width&&(i.width=t.datagrid("options").width),t.datagrid("resize",{width:i.width,height:i.height})):e.indexOf("treegrid")>-1?(void 0==i.height&&(i.height=t.datagrid("options").height),void 0==i.width&&(i.width=t.datagrid("options").width),t.treegrid("resize",{width:i.width,height:i.height})):e.indexOf("ztree")}var a=$("[autoResize=true]");if(!(a.length<=0)){var o,h={},r=navigator.userAgent.toLowerCase();(o=r.match(/msie ([\d.]+)/))?h.ie=o[1]:(o=r.match(/firefox\/([\d.]+)/))?h.firefox=o[1]:(o=r.match(/chrome\/([\d.]+)/))?h.chrome=o[1]:(o=r.match(/opera.([\d.]+)/))?h.opera=o[1]:(o=r.match(/version\/([\d.]+).*safari/))&&(h.safari=o[1]);for(var n=0;n<2;n++)setTimeout(function(){var o=$(window).width(),r=$(window).height();h.ie||(r=o<$(document).width()?window.innerHeight-15:window.innerHeight),o=o<1024?1024:o,a.each(function(a,h){var n=$(this).attr("componentType"),s=!0;void 0!=n&&n&&null!=n&&"null"!=n&&""!=n||(s=!1);var l=s?i($(this),n):$(this).offset(),c=$(this).attr("resizeHeight");void 0!=c&&"false"!=c&&(c.indexOf("%")>-1?l.height=(r-l.top)*c.substring(0,c.length-1)/100:l.height=r-l.top-c,t&&(t-=parseInt(c)));var g=$(this).attr("resizeWidth");void 0!=g&&"false"!=g&&(g.indexOf("%")>-1?l.width=(o-l.left)*g.substring(0,g.length-1)/100:l.width=o-l.left-g,e&&(e-=parseInt(g))),t&&void 0!=l.height&&l.height<t&&(l.height=t),e&&void 0!=l.width&&l.width<e&&(l.width=e),s?d($(this),n,l):(void 0==l.height&&(l.height=$(this).height()),void 0==l.width&&(l.width=$(this).width()),$(this).height(l.height),$(this).width(l.width))})},50)}}},$.fn.treegrid.methods=$.extend({},$.fn.treegrid.methods,{isChecked:function(t,e){var i=$(t).datagrid("getPanel").find("table.datagrid-btable tr[node-id="+e+"] input[name=ck]");return!(!i||!i.attr("checked"))}}),$.fn.datagrid.defaults.view=$.extend({},$.fn.datagrid.defaults.view,{renderRow:function(target,fields,frozen,rowIndex,rowData){var opts=$.data(target,"datagrid").options,cc=[];if(frozen&&opts.rownumbers){var rownumber=rowIndex+1;opts.pagination&&(rownumber+=(opts.pageNumber-1)*opts.pageSize),cc.push('<td class="datagrid-td-rownumber"><div class="datagrid-cell-rownumber">'+rownumber+"</div></td>")}for(var i=0;i<fields.length;i++){var field=fields[i],col=$(target).datagrid("getColumnOption",field);if(col){var fieldValue=jQuery.proxy(function(){try{return eval("this."+field)}catch(t){return""}},rowData)(),styleValue=col.styler?col.styler(fieldValue,rowData,rowIndex)||"":"",style=col.hidden?'style="display:none;'+styleValue+'"':styleValue?'style="'+styleValue+'"':"";cc.push('<td field="'+field+'" '+style+">");var style="";col.checkbox||(col.align&&(style+="text-align:"+col.align+";"),opts.nowrap?opts.autoRowHeight&&(style+="height:auto;"):style+="white-space:normal;height:auto;"),cc.push('<div style="'+style+'" '),col.checkbox?cc.push('class="datagrid-cell-check '):cc.push('class="datagrid-cell '+col.cellClass),cc.push('">'),col.checkbox?cc.push('<input type="checkbox" name="'+field+'" value="'+(void 0!=fieldValue?fieldValue:"")+'"/>'):col.formatter?cc.push(col.formatter(fieldValue,rowData,rowIndex)):cc.push(fieldValue),cc.push("</div>"),cc.push("</td>")}}return cc.join("")}});var EasyuiTools={addTab:function(t,e,i,d,a){var o=$("#"+t);o.length<=0&&(o=parent.$("#"+t)),o.length<=0&&window.open(d,i);var h="未实现";d&&(h="<iframe src='"+d+"' frameborder='0' style='width: 100%; height: 100%;'></iframe>"),o.tabs("exists",i)?(o.tabs("select",i),a&&(o.tabs("getSelected").panel("options").content=h),o.tabs("getSelected").panel("refresh")):o.tabs("add",{id:e,title:i,fit:!0,closable:!0,content:h})},openWindow:function(t,e,i,d){$('<div id="'+t+'"/>').window({title:e,width:i,minimizable:!1,maximizable:!1,collapsible:!1,modal:!0,href:d,onClose:function(){$(this).window("destroy")},onLoad:function(){$(this).window("center")}})},alertError:function(t,e,i){$("<div/>").dialog({title:"异常",width:e||800,height:i||200,closed:!1,cache:!1,modal:!0,onLoad:function(){$(this).dialog("center")}}).html(t)}};$.extend($.fn.datagrid.defaults,{pageList:[20,30,40,50],striped:!0});