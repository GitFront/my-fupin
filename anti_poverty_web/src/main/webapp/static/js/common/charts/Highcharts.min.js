Array.prototype.contains=function(t){for(var e=this.length;e--;)if(this[e]===t)return!0;return!1};var HighChart={ChartDataFormate:{FormateNOGroupData:function(t){for(var e=[],a=[],r=0;r<t.length;r++)e.push(t[r].name||""),a.push([t[r].name,t[r].value||0]);return{category:e,data:a}},FormatGroupData:function(t){for(var e=new Array,a=new Array,r=new Array,o=0;o<t.length;o++)e.contains(t[o].name)||e.push(t[o].name),a.contains(t[o].group)||a.push(t[o].group);for(o=0;o<a.length;o++){for(var n={},i=new Array,s=0;s<t.length;s++)for(var l=0;l<e.length;l++)a[o]==t[s].group&&t[s].name==e[l]&&i.push(t[s].value);n={name:a[o],data:i},r.push(n)}return{category:e,series:r}},FormatBarLineData:function(t,e,a){for(var r=[],o=[],n=[],i=[],s=1;s<t.length;s++){r.contains(t[s].name)||r.push(t[s].name),n.push(t[s].value);var l=0;t[s].value!=t[s-1].value&&(l=0!=t[s-1].value?Math.round(100*(t[s].value/t[s-1].value-1)):100),i.push(l)}return o.push({name:e,color:"#4572A7",type:"column",yAxis:1,data:n,tooltip:{valueStuffix:""}}),o.push({name:a,color:"#89A54E",type:"spline",yAxis:1,data:i,tooltip:{valueStuffix:"%"}}),{series:o}}},ChartOptionTemplates:{Pie:function(t,e,a){var r=HighChart.ChartDataFormate.FormateNOGroupData(t);return{chart:{plotBackgroundColor:null,plotBorderWidth:null,plotShadow:!1},title:{text:a||""},tooltip:{pointFormat:"{series.name}: <b>{point.percentage:.1f}%</b>"},plotOptions:{pie:{allowPointSelect:!0,cursor:"pointer",dataLabels:{enabled:!1},showInLegend:!0}},series:[{type:"pie",name:e||"",data:r.data}]}},DrillDownPie:function(t,e,a){return{chart:{type:"pie"},title:{text:a||""},subtitle:{text:"请点击饼图项看详细占比"},plotOptions:{series:{dataLabels:{enabled:!0,format:"{point.name}: {point.y:.1f}%"}}},tooltip:{headerFormat:'<span style="font-size:11px">{series.name}</span><br>',pointFormat:'<span style="color:{point.color}">{point.name}</span>: <b>{point.y:.2f}%</b> of total<br/>'},series:[{name:e||"",colorByPoint:!0,data:(void 0).fir_data}],drilldown:{series:(void 0).series}}},Line:function(t,e,a){var r=HighChart.ChartDataFormate.FormatGroupData(t);return{title:{text:a||"",x:-20},subtitle:{text:"",x:-20},xAxis:{categories:r.category},yAxis:{title:{text:e||""},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{valueSuffix:""},legend:{layout:"horizontal",align:"center",verticalAlign:"bottom"},series:r.series}},Bars:function(t,e,a,r,o){var n=HighChart.ChartDataFormate.FormatGroupData(t),i={chart:{type:"column"},title:{text:o||""},subtitle:{text:""},credits:{enabled:!1},xAxis:{categories:n.category},yAxis:{title:{text:r}},tooltip:{headerFormat:'<span style="font-size:10px">{point.key}</span><table>',pointFormat:'<tr><td style="color:{series.color};padding:0">{series.name};</td><td style="padding:0"><b>{point.y:.1f}</b></td></tr>',footerFormat:"</table>",shared:!0,useHTML:!0},plotOptions:{column:{pointPadding:.2,borderWidth:0}},series:n.series},s={};return e&&!a&&(s={tooltip:{formatter:function(){return"<b>"+this.x+"</b><br/>"+this.series.name+": "+this.y+"<br/>Total: "+this.point.stackTotal}},plotOptions:{column:{stacking:"normal",dataLabels:{enabled:!0,color:Highcharts.theme&&Highcharts.theme.dataLabelsColor||"white"}}}}),!e&&a&&(s={tooltip:{pointFormat:'<span style="color:{series.color}">{series.name}</span>: <b>{point.y}</b> ({point.percentage:.0f}%)<br/>',shared:!0},plotOptions:{column:{stacking:"percent"}}}),$.extend({},i,s)},Pyramid:function(t,e,a){var r=HighChart.ChartDataFormate.FormateNOGroupData(t);return{chart:{type:"pyramid",marginRight:100},title:{text:a||"",x:-50},plotOptions:{series:{dataLabels:{enabled:!0,format:"<b>{point.name}</b> ({point.y:,.0f})",color:"black",softConnector:!0}}},legend:{enabled:!1},series:[{name:e||"",data:r.data}]}},BarLine:function(t,e,a,r){var o=HighChart.ChartDataFormate.FormatBarLineData(t);o.category}},RenderChart:function(t,e){e.highcharts(t)}};