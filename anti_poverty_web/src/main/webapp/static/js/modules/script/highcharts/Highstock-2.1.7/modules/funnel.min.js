!function(t){var e=t.getOptions(),i=e.plotOptions,n=t.seriesTypes,r=t.merge,o=function(){},s=t.each,a=t.pick;i.funnel=r(i.pie,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),n.funnel=t.extendClass(n.pie,{type:"funnel",animate:o,translate:function(){var t,e,i,n,r,a,l,h,p,c,d,u=function(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)},f=0,g=this.chart,b=this.options,y=b.reversed,v=b.ignoreHiddenPoint,k=g.plotWidth,C=g.plotHeight,m=0,W=u((g=b.center)[0],k),w=u(g[1],C),L=u(b.width,k),H=u(b.height,C),Y=u(b.neckWidth,k),A=u(b.neckHeight,C),O=H-A,u=this.data,P="left"===b.dataLabels.position?1:0;this.getWidthAt=e=function(t){return t>H-A||H===A?Y:Y+(H-A-t)/(H-A)*(L-Y)},this.getX=function(t,i){return W+(i?-1:1)*(e(y?C-t:t)/2+b.dataLabels.distance)},this.center=[W,w,H],this.centerX=W,s(u,function(t){v&&!1===t.visible||(f+=t.y)}),s(u,function(s){d=null,n=f?s.y/f:0,p=(a=w-H/2+m*H)+n*H,t=e(a),l=(r=W-t/2)+t,t=e(p),c=(h=W-t/2)+t,a>O?(r=h=W-Y/2,l=c=W+Y/2):p>O&&(d=p,t=e(O),h=W-t/2,c=h+t,p=O),y&&(a=H-a,p=H-p,d=d?H-d:null),i=["M",r,a,"L",l,a,c,p],d&&i.push(c,d,h,d),i.push(h,p,"Z"),s.shapeType="path",s.shapeArgs={d:i},s.percentage=100*n,s.plotX=W,s.plotY=(a+(d||p))/2,s.tooltipPos=[W,s.plotY],s.slice=o,s.half=P,v&&!1===s.visible||(m+=n)})},drawPoints:function(){var t=this,e=t.options,i=t.chart.renderer;s(t.data,function(n){var r=n.options,o=n.graphic,s=n.shapeArgs;o?o.animate(s):n.graphic=i.path(s).attr({fill:n.color,stroke:a(r.borderColor,e.borderColor),"stroke-width":a(r.borderWidth,e.borderWidth)}).add(t.group)})},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e,i,r,o,s=this.data,a=this.options.dataLabels.distance,l=s.length;for(this.center[2]-=2*a;l--;)i=s[l],e=(t=i.half)?1:-1,o=i.plotY,r=this.getX(o,t),i.labelPos=[0,o,r+(a-5)*e,o,r+a*e,o,t?"right":"left",0];n.pie.prototype.drawDataLabels.call(this)}}),e.plotOptions.pyramid=t.merge(e.plotOptions.funnel,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),t.seriesTypes.pyramid=t.extendClass(t.seriesTypes.funnel,{type:"pyramid"})}(Highcharts);