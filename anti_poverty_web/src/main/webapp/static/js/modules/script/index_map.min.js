function initOption(e,a){return{title:!1,mapName:"广东省",height:"550",authInfo:{userPac:e,userLevel:a},fontFamily:"Microsoft YaHei",topNode:"440000000000",isLayerLoad:!0,color:{backgroundColor:"#1f1e30",borderColor:"#1d1a29",seriesNullColor:"#56627c",seriesBorderColor:"#212832",seriesSelectColor:"#f3e924",dataLabelColor:"#FFF",tooltipNameColor:"#f3e924",tooltipValueColor:"#f3e924",tooltipMinorValueColor:"#FFFFFF",tooltipBackgroundColor:"#1d1a28",tooltipBorderColor:"#76d1fd"},pointLoader:{isLoadPoint:!0,isRemote:!0,doSetPoint:"showpoint"},mapLoader:{isRemote:!0,remoteType:"common",commonQueryName:"aspire.bi.common.povertygeometry.queryMapGeoData",commonMapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",drillKey:"PAC",geometry:"GEOMETRY",ifFurtherPoor:"IF_FURTHER_POOR"}},showPoint:!0,colorStops:badColor,legend:{enabled:!0,legendFloat:!0,legendAlign:"bottom",backgroundColor:"rgba(29,26,40,0.7)",x:-95,y:-25},drillUpButton:{relativeTo:"spacingBox",y:20,x:-60,fill:"#6cc3ed",strokeWidth:1,stroke:"#87e6fa",r:3,fontColor:"#1c1925",fontSize:13,selectColor:"#3bb0c9"},navigation:!0,navigationButton:!1,valueDecimal:2,parentKey:"PPAC",drillKey:"drillKey",valueMapper:[{key:"value",name:"贫困人数",valueSuffix:"人"},{key:"value2",name:"预脱贫人数",valueSuffix:"人"},{key:"value3",name:"预脱贫率（按人数）",valueSuffix:"%"}],doClick:"re",doDrilldown:"changeData",doDrillup:"fan",setLoading:["showLoadingMask","closeLoading"]}}function getDate(){return $.ajax({type:"post",url:ctx+"/a/map/mapDate",dataType:"json"})}function changeDataMapDataType(e){type=e,loadMap(e,scope)}function loadMap(e,a){var o={},t={},l=[];1==e?(o=[{key:"value",name:"贫困户数",valueSuffix:"户"},{key:"value2",name:"预脱贫户数",valueSuffix:"户"},{key:"value3",name:"预脱贫户比例",valueSuffix:"%"}],t={key:"PAC",value:"POOR_FAM",value2:"AID_POOR_FAM",value3:"AID_POOR_FAM_R"},l=badColor):5==e?(o=[{key:"value",name:"预脱贫户比例",valueSuffix:"%"},{key:"value2",name:"预脱贫户数",valueSuffix:"户"},{key:"value3",name:"贫困户数",valueSuffix:"户"}],t={key:"PAC",value:"AID_POOR_FAM_R",value2:"AID_POOR_FAM",value3:"POOR_POP"},l=greatColor):3==e?(o=[{key:"value",name:"预脱贫户数",valueSuffix:"户"},{key:"value2",name:"贫困户数",valueSuffix:"户"},{key:"value3",name:"预脱贫户比例",valueSuffix:"%"}],t={key:"PAC",value:"AID_POOR_FAM",value2:"POOR_FAM",value3:"AID_POOR_FAM_R"},l=greatColor):4==e?(o=[{key:"value",name:"预脱贫人数",valueSuffix:"人"},{key:"value2",name:"贫困人数",valueSuffix:"人"},{key:"value3",name:"预脱贫率（按人数）",valueSuffix:"%"}],t={key:"PAC",value:"AID_POOR_POP",value2:"POOR_POP",value3:"AID_POOR_POP_R"},l=greatColor):2==e?(o=[{key:"value",name:"贫困人数",valueSuffix:"人"},{key:"value2",name:"预脱贫人数",valueSuffix:"人"},{key:"value3",name:"预脱贫率（按人数）",valueSuffix:"%"}],t={key:"PAC",value:"POOR_POP",value2:"AID_POOR_POP",value3:"AID_POOR_POP_R"},l=badColor):6==e&&(o=[{key:"value",name:"预脱贫率（按人数）",valueSuffix:"%"},{key:"value2",name:"贫困人数",valueSuffix:"人"},{key:"value3",name:"预脱贫人数",valueSuffix:"人"}],t={key:"PAC",value:"AID_POOR_POP_R",value2:"POOR_POP",value3:"AID_POOR_POP"},l=greatColor),Highmap.mybatis.reloadData(chartid,queryName,{type:e,scope:a,newDate:statTime},t,o,l)}function changeDataMapDataScope(e){Highmap.levelid;loadMap(type,scope=e)}function re(e){var a=e.properties.PAC,o=(e.properties.name,e.properties.type);"PKH"==o&&$.poorFile.showFamilyFile(a),"PKC"==o&&$.poorFile.showCountryFile(a)}function test(){alert(1)}function changeData(e,a,o){$.ajax({type:"POST",url:ctx+"/a/map/mapPac",dataType:"json",data:{pacid:a,level:o},success:function(e){var a=e.pac,t={hasCountryFile:!0};loading_api=changeDataDistrict(levelMap.get(o),a,t)}})}function showpoint(e,a){var o={};if(a<5){o.isLoadPoint=!0,o.isRemote=!0;var t=2;a>1&&(t=3);i={queryName:"aspire.bi.common.povertygeometry.queryMappiontGeoForCountry",mapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",longitude:"LONGITUDE",latitude:"LATITUDE",type:"POINT_TYPE"},pointName:"相对贫困村",pointVisible:!1,pointColor:"#ffff32",radius:t};o.points=[i]}else{o.isLoadPoint=!0,o.isRemote=!0;var l={name:"NAME",PAC:"PAC",PPAC:"PPAC",longitude:"LONGITUDE",latitude:"LATITUDE",type:"POINT_TYPE"},i={queryName:"aspire.bi.common.povertygeometry.queryMappiontGeoForFam",parameters:{isOut:1},mapper:l,pointName:"预脱贫户",pointVisible:!0,pointColor:"#009311",radius:t=3.5},n={queryName:"aspire.bi.common.povertygeometry.queryMappiontGeoForFam",parameters:{isOut:0},mapper:l,pointName:"未脱贫户",pointVisible:!0,pointColor:"#ffff32",radius:t};o.points=[i,n]}return o}function fan(e,a){showLoadingMask(),$.ajax({type:"POST",url:ctx+"/a/map/mapPac",dataType:"json",data:{pacid:e,level:a},success:function(e){var o=e.pac,t={hasCountryFile:!1};loading_api=changeDataDistrict(levelMap.get(a),o,t),closeLoading()},error:function(e){loading_api.onError()}})}function closeLoading(){waitLoad?loading_api.onSuccess():waitLoad=setInterval(function(){var e=!1;null!==loading_api&&(e=!0),e&&(loading_api.onSuccess(),clearInterval(waitLoad))},20)}function dataMapBack(){Highmap.mapObject.drillUp()}var loading_api=null,badColor=["#91d4ff","#2e5fff","#ff0000"],greatColor=["#91d4ff","#2e5fff","#6bdb1f"],levelMap=new Map;levelMap.put(1,"province"),levelMap.put(2,"city"),levelMap.put(3,"county"),levelMap.put(4,"town"),levelMap.put(5,"country");var chartid="",type=1,scope="1",statTime="",queryName="com.aspire.birp.modules.antiPoverty.dao.DataMonDao.queryMapCun";$(function(){var e=getDate();e&&e.then(function(e){var a=initOption(e.userPac,e.userLevel);statTime=e.statTime,chartid=Highmap.mybatis.Map("map",queryName,{type:type,scope:scope,newDate:statTime},{key:"PAC",value:"POOR_POP",value2:"AID_POOR_POP",value3:"AID_POOR_POP_R"},"countries/cn/custom/cn-gongdong","PAC",a),changeData(null,"440000000000",1)})});var waitLoad=null;