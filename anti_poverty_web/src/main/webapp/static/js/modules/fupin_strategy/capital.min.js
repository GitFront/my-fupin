$(function(){var a=$.extend,e=window.Helpers.ajax,t=$.monitorHelper.createDataMonitor,n=$.components.ROW_KEY,i=($.components.CONST_RADIO_VALUES,$(".search-file-num")),o=($(".monitor-nav"),{TITLE:"资金监控",TYPE:"capital",TAB:[{NAME:"资金管理",VALUE:"capital_management"},{NAME:"资金分析",VALUE:"capital_analysis"},{NAME:"资金排序",VALUE:"capital_order",CONFIG_ORDER:"true"}]}),r=t({mix:{renderCapitalCapitalManagement:function(e){var t=this;(e=a({},e)).url=URLS.URL_DATA_MONITOR_CAPITAL_MANAGEMENT,t.renderPageContent(),t.renderChartTable(e)},renderCapitalCapitalAnalysis:function(e){var t=this;(e=a({},e)).url=URLS.URL_DATA_MONITOR_CAPITAL_ANALYSIS,e.tableDetail=!0,t.renderPageContent(),t.buildCheckArea(e,{rowKeyArr:[n.SCOPE,n.PROJECT_TYPE_COUNTRY,n.PROJECT_TYPE_FAMILY]}),t.renderChartTable(e)},renderCapitalCapitalFile:function(a){hideLoadingMask()}}});$("body").on("click",".monitor-nav li",function(a){"capital_file"===$(this).attr("data-tab-type")?i.removeClass("hide"):i.addClass("hide")}),$("body").on("click","#capitalSource .radio",function(a){$(this).siblings().removeClass("active"),$(this).addClass("active")}),$("body").on("click","#popupSearchBtn",function(t){function n(t){showLoadingMask(),e({url:URLS.URL_DATA_MONITOR_CAPITAL_FILE,data:a(d,{page:t.table_page}),success:function(a){var e=a.code,o=a.data;if(0==e&&o){var r={tableData:o.table,table_page:t.table_page};i.html(template("tplConfigTable",o.table)),i.find(".export-btn").addClass("hide"),$.components.tableEvent.bindPopupEvent(i),t.tableData.pagination&&$.components.tableEvent.bindPagination(i,r,n)}hideLoadingMask()},error:function(){hideLoadingMask()}})}var i=$("#searchResultTable"),o=r.getCurYear(),l=$("#capitalSource .radio.active").attr("data-value");_keyword=$("#keywordInput").val();var d={year:o,level:l,keyword:_keyword,page:1};showLoadingMask(),e({url:URLS.URL_DATA_MONITOR_CAPITAL_FILE,data:d,success:function(a){var e=a.code,t=a.data;if(0==e&&t){var o={tableData:t.table,table_page:1};i.html(template("tplConfigTable",o.tableData)),i.find(".export-btn").addClass("hide"),$.components.tableEvent.bindPopupEvent(i),o.tableData.pagination&&$.components.tableEvent.bindPagination(i,o,n)}hideLoadingMask()},error:function(){hideLoadingMask()}})}),r.showDataMonitor({target:o,hasBack:!1})});