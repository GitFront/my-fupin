$(function(){function t(t){u!=t&&e(t),t&&(u=t),o(),a()}function e(t){"undefined"!=typeof changeStrategyMapDataScope&&changeStrategyMapDataScope(t)}function a(){function t(t){$("#blockTop").html(template("tplTopIndex",t))}function e(t){function o(){e.lastStat=t}e.lastStat||o(),function(t){$("#blockBottom").html(template("tplBottomIndex",{lastStat:e.lastStat,stat:t})),$("#blockBottom").find(".num.dynamic").each(a),o()}(t)}function a(t){var e=$(this);t=$.extend({},t||{},e.data("countToOptions")||{}),e.countTo(t)}l({url:URLS.URL_STRATEGY_DYNAMIC_INDEX,data:{scope:u},success:function(a){var o=a.code,n=a.data;0==o&&n&&(e(n.stat),t(n.top_indexes))}})}function o(){function t(t){$("#blockAverage").html(template("tplAverage",t)),e("chartAverageLabor",t.chart_config_labor,r),e("chartAverageSociety",t.chart_config_society,f)}function e(t,e,a){var o=a(e),n=o.data,i=o.config;loadLiquidFillGauge(t,n,i)}function a(t){var e=$("#blockGuarantee");e.html(template("tplGuarantee"));var a=e.find(".chart-edu"),o=e.find(".chart-medical"),n=e.find(".chart-house"),i=echarts.init(a[0]),c=echarts.init(o[0]),l=echarts.init(n[0]);i.setOption(commonEchartConfig.genGuaranteeConfig(t.chart_config_edu)),c.setOption(commonEchartConfig.genGuaranteeConfig(t.chart_config_medical)),l.setOption(commonEchartConfig.genGuaranteeConfig(t.chart_config_house))}function o(t){var e=$("#blockBars").html(template("tplBars",{list:t}));Vote.ListShow.init({id:"chartBars",percent:t.map(function(t){return t.percent/100}),width:e.find(".litem:first").width()}),Vote.ListShow.go()}function n(t){$("#blockAlarm").html(template("tplAlarm",t))}function i(t){$("#blockCapital").html(template("tplCapital",t)),echarts.init(document.getElementById("chartPie")).setOption(commonEchartConfig.genChartPieConfig(t.chart_config_pie)),echarts.init(document.getElementById("chartBubble")).setOption(commonEchartConfig.genChartBubbleConfig(t.chart_config_bubble))}function c(t){!function(){h&&clearInterval(h),h=setInterval(function(){var e=parseInt((t-Date.now())/1e3),a=0,o=0,n=0,i=0;e>0&&(a=Math.floor(e/86400),o=Math.floor(e/3600)-24*a,n=Math.floor(e/60)-24*a*60-60*o,i=Math.floor(e)-24*a*60*60-60*o*60-60*n),a<=9&&(a="0"+a),o<=9&&(o="0"+o),n<=9&&(n="0"+n),i<=9&&(i="0"+i),$("#dayshow").html(a),$("#hourshow").html(o),$("#minuteshow").html(n),$("#secondshow").html(i)},1e3)}()}function r(t){var e={},a=t.percent,o=liquidFillGaugeDefaultSettings();return o.circleThickness=.1,o.circleFillGap=.1,"100"==a?(o.circleColor="#f3e824",o.textColor="#f3e824",o.waveTextColor="#f3e824",o.waveColor="#322e41"):(o.circleColor="#6cc3ff",o.textColor="#fff",o.waveTextColor="#fff",o.waveColor="#6cc3ff"),o.textVertPosition=.5,o.waveAnimateTime=1e3,o.waveHeight=.05,o.waveAnimate=!0,o.waveRise=!1,o.waveHeightScaling=!1,o.waveOffset=.25,o.textSize=.75,o.waveCount=3,o.displayPercent=!1,o.maxValue=7365,e.config=o,e.data=a,e}function f(t){var e={},a=t.percent,o=liquidFillGaugeDefaultSettings();return o.circleThickness=.1,o.circleFillGap=.1,"100"==a?(o.circleColor="#f3e824",o.textColor="#f3e824",o.waveTextColor="#f3e824",o.waveColor="#322e41"):(o.circleColor="#6cc3ff",o.textColor="#fff",o.waveTextColor="#fff",o.waveColor="#6cc3ff"),o.textVertPosition=.5,o.waveAnimateTime=1e3,o.waveHeight=.05,o.waveAnimate=!0,o.waveRise=!1,o.waveHeightScaling=!1,o.waveOffset=.25,o.textSize=.75,o.waveCount=3,e.config=o,e.data=a,e}l({url:URLS.URL_STRATEGY_STATIC_DATA,data:{scope:u},success:function(e){var l=e.code,r=e.data;0==l&&r&&(c(r.time_end),t(r.average),a(r.guarantee),o(r.bars),n(r.alarm),i(r.capital))}})}var n="click",i="show",c="active",l=($.extend,Helpers.ajax),r=$("body"),f=$("#btnScope"),s=$("#scopeList"),u=DEFAULT_AREA_SCOPE,h=null;!function(){function e(){s.hasClass(i)?o():a()}function a(){s.addClass(i)}function o(){s.removeClass(i)}f.on(n,function(t){t.stopPropagation(),e()}),s.on(n,function(t){t.stopPropagation()}).on(n,"li",function(){var e=$(this),a=e.attr("data-scope");e.hasClass(c)||(e.addClass(c).siblings().removeClass(c),t(a),f.text(e.text()),o())}),r.on(n,o),t()}()});