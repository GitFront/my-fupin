!function(t){var i=t.Axis,o=t.Chart,s=t.Color,e=t.Legend,a=t.LegendSymbolMixin,r=t.Series,n=t.getOptions(),l=t.each,h=t.extend,p=t.extendClass,d=t.merge,c=t.pick,u=t.seriesTypes,g=t.wrap,f=function(){},m=t.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};h(m.prototype,i.prototype),h(m.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(t,o){var s,e="vertical"!==t.options.legend.layout;s=d(this.defaultColorAxisOptions,{side:e?2:1,reversed:!e},o,{isX:e,opposite:!e,showEmpty:!1,title:null,isColor:!0}),i.prototype.init.call(this,t,s),o.dataClasses&&this.initDataClasses(o),this.initStops(o),this.isXAxis=!0,this.horiz=e,this.zoomEnabled=!1},tweenColors:function(t,i,o){var s,e;return i.rgba.length&&t.rgba.length?(t=t.rgba,e=((s=1!==(i=i.rgba)[3]||1!==t[3])?"rgba(":"rgb(")+Math.round(i[0]+(t[0]-i[0])*(1-o))+","+Math.round(i[1]+(t[1]-i[1])*(1-o))+","+Math.round(i[2]+(t[2]-i[2])*(1-o))+(s?","+(i[3]+(t[3]-i[3])*(1-o)):"")+")"):e=i.raw||"none",e},initDataClasses:function(t){var i,o=this,e=this.chart,a=0,r=this.options,n=t.dataClasses.length;this.dataClasses=i=[],this.legendItems=[],l(t.dataClasses,function(t,l){var h;t=d(t),i.push(t),t.color||("category"===r.dataClassColor?(h=e.options.colors,t.color=h[a++],a===h.length&&(a=0)):t.color=o.tweenColors(s(r.minColor),s(r.maxColor),n<2?.5:l/(n-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],l(this.stops,function(t){t.color=s(t[1])})},setOptions:function(t){i.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var t,i,o,s,e=this.legendSymbol,a=this.chart;e&&(this.left=t=e.attr("x"),this.top=i=e.attr("y"),this.width=o=e.attr("width"),this.height=s=e.attr("height"),this.right=a.chartWidth-t-o,this.bottom=a.chartHeight-i-s,this.len=this.horiz?o:s,this.pos=this.horiz?t:i)},toColor:function(t,i){var o,s,e,a,r,n,l=this.stops,h=this.dataClasses;if(h){for(n=h.length;n--;)if(r=h[n],s=r.from,e=r.to,(void 0===s||t>=s)&&(void 0===e||t<=e)){a=r.color,i&&(i.dataClass=n);break}}else{for(this.isLog&&(t=this.val2lin(t)),o=1-(this.max-t)/(this.max-this.min||1),n=l.length;n--&&!(o>l[n][0]););s=l[n]||l[n+1],o=1-((e=l[n+1]||s)[0]-o)/(e[0]-s[0]||1),a=this.tweenColors(s.color,e.color,o)}return a},getOffset:function(){var t=this.legendGroup,o=this.chart.axisOffset[this.side];t&&(i.prototype.getOffset.call(this),this.axisGroup.parentGroup||(this.axisGroup.add(t),this.gridGroup.add(t),this.labelGroup.add(t),this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=o)},setLegendColor:function(){var t,i=this.horiz,o=this.options,s=this.reversed;t=i?[+s,0,+!s,0]:[0,+!s,0,+s],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:o.stops||[[0,o.minColor],[1,o.maxColor]]}},drawLegendSymbol:function(t,i){var o=t.padding,s=t.options,e=this.horiz,a=c(s.symbolWidth,e?200:12),r=c(s.symbolHeight,e?12:200),n=c(s.labelPadding,e?16:30),l=c(s.itemDistance,10);this.setLegendColor(),i.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,a,r).attr({zIndex:1}).add(i.legendGroup),i.legendSymbol.getBBox(),this.legendItemWidth=a+o+(e?l:n),this.legendItemHeight=r+o+(e?n:0)},setState:f,visible:!0,setVisible:f,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,o){var s,e=o&&o.plotX,a=o&&o.plotY,r=this.pos,n=this.len;o&&((s=this.toPixels(o[o.series.colorKey]))<r?s=r-2:s>r+n&&(s=r+n+2),o.plotX=s,o.plotY=this.len-s,i.prototype.drawCrosshair.call(this,t,o),o.plotX=e,o.plotY=a,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(t,o,s,e,a){return"number"==typeof a?this.horiz?["M",a-4,this.top-6,"L",a+4,this.top-6,a,this.top,"Z"]:["M",this.left,a,"L",this.left-6,a+6,this.left-6,a-6,"Z"]:i.prototype.getPlotLinePath.call(this,t,o,s,e)},update:function(t,o){l(this.series,function(t){t.isDirtyData=!0}),i.prototype.update.call(this,t,o),this.legendItem&&(this.setLegendColor(),this.chart.legend.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var i,o=this,s=this.chart,e=this.legendItems,r=s.options.legend,n=r.valueDecimals,p=r.valueSuffix||"";return e.length||l(this.dataClasses,function(r,d){var c=!0,u=r.from,g=r.to;i="",void 0===u?i="< ":void 0===g&&(i="> "),void 0!==u&&(i+=t.numberFormat(u,n)+p),void 0!==u&&void 0!==g&&(i+=" - "),void 0!==g&&(i+=t.numberFormat(g,n)+p),e.push(h({chart:s,name:i,options:{},drawLegendSymbol:a.drawRectangle,visible:!0,setState:f,setVisible:function(){c=this.visible=!c,l(o.series,function(t){l(t.points,function(t){t.dataClass===d&&t.setVisible(c)})}),s.legend.colorizeItem(this,c)}},r))}),e},name:""}),l(["fill","stroke"],function(t){HighchartsAdapter.addAnimSetter(t,function(i){i.elem.attr(t,m.prototype.tweenColors(s(i.start),s(i.end),i.pos))})}),g(o.prototype,"getAxes",function(t){var i=this.options.colorAxis;t.call(this),this.colorAxis=[],i&&(t=new m(this,i))}),g(e.prototype,"getAllItems",function(t){var i=[],o=this.chart.colorAxis[0];return o&&(o.options.dataClasses?i=i.concat(o.getDataClassLegendSymbols()):i.push(o),l(o.series,function(t){t.options.showInLegend=!1})),i.concat(t.call(this))});var x={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:f,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,i=this.options.nullColor,o=this.colorAxis,s=this.colorKey;l(this.data,function(e){var a,r=e[s];(a=null===r?i:o&&void 0!==r?o.toColor(r,e):e.color||t.color)&&(e.color=a)})}};n.plotOptions.heatmap=d(n.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),u.heatmap=p(u.scatter,d(x,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,supportsDrilldown:!0,getExtremesFromAll:!0,init:function(){var t;u.scatter.prototype.init.apply(this,arguments),t=this.options,this.pointRange=t.pointRange=c(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this,i=t.options,o=t.xAxis,s=t.yAxis;t.generatePoints(),l(t.points,function(t){var e=(i.colsize||1)/2,a=(i.rowsize||1)/2,r=Math.round(o.len-o.translate(t.x-e,0,1,0,1)),n=Math.round(o.len-o.translate(t.x+e,0,1,0,1)),l=Math.round(s.translate(t.y-a,0,1,0,1)),h=Math.round(s.translate(t.y+a,0,1,0,1));t.plotX=t.clientX=(r+n)/2,t.plotY=(l+h)/2,t.shapeType="rect",t.shapeArgs={x:Math.min(r,n),y:Math.min(l,h),width:Math.abs(n-r),height:Math.abs(h-l)}}),t.translateColors(),this.chart.hasRendered&&l(t.points,function(t){t.shapeArgs.fill=t.options.color||t.color})},drawPoints:u.column.prototype.drawPoints,animate:f,getBox:f,drawLegendSymbol:a.drawRectangle,getExtremes:function(){r.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,r.prototype.getExtremes.call(this)}}))}(Highcharts);