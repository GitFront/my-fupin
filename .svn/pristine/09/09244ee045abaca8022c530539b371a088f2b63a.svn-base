function initOption(e,a,l,o,u){return{title:!1,mapName:a,height:"550",authInfo:{userPac:l,userLevel:o},fontFamily:"Microsoft YaHei",topNode:e,isLayerLoad:!0,color:{backgroundColor:"#1f1e30",borderColor:"#1d1a29",seriesNullColor:"#56627c",seriesBorderColor:"#212832",seriesSelectColor:"#f3e924",dataLabelColor:"#FFF",tooltipNameColor:"#f3e924",tooltipValueColor:"#f3e924",tooltipMinorValueColor:"#FFFFFF",tooltipBackgroundColor:"#1d1a28",tooltipBorderColor:"#76d1fd"},pointLoader:{isLoadPoint:!0,isRemote:!0,doSetPoint:"showpoint"},mapLoader:{isRemote:!1,isDomain:!1,jsonpCallback:"mapGeoJsonp",localUrl:u},showPoint:!0,colorStops:greatColor,legend:{enabled:!0,legendFloat:!0,legendAlign:"bottom",backgroundColor:"rgba(29,26,40,0.7)",x:-9,y:-5},drillUpButton:{relativeTo:"spacingBox",y:30,x:-30,fill:"#6cc3ed",strokeWidth:1,stroke:"#87e6fa",r:3,fontColor:"#1c1925",fontSize:13,selectColor:"#3bb0c9"},navigation:!0,navigationButton:!1,valueDecimal:2,parentKey:"PPAC",drillKey:"drillKey",valueMapper:[{key:"value",name:"自然村达标村数",valueSuffix:"个"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value3",name:"自然村达标村比例",valueSuffix:"%"}],doClick:"re",doDrilldown:"changeData",doDrillup:"fan",setLoading:["showLoadingMask","closeLoading"]}}function getDate(){return $.ajax({type:"post",url:ctx+"/a/map/mapDate",dataType:"json"})}function loadMap(e){var a={},l={},o=[];1==e?(a=[{key:"value",name:"相对贫困村数",valueSuffix:"个"},{key:"value2",name:"示范村达标村数",valueSuffix:"个"},{key:"value3",name:"示范村达标比例",valueSuffix:"%"}],l={key:"PAC",value:"PROVICE_NATURAL_NUM",value2:"E_NATURAL_NUM",value3:"E_NATURAL_RATE"},o=badColor):2==e?(a=[{key:"value",name:"示范村达标村数",valueSuffix:"个"},{key:"value2",name:"相对贫困村数",valueSuffix:"个"},{key:"value3",name:"示范村达标比例",valueSuffix:"%"}],l={key:"PAC",value:"E_NATURAL_NUM",value2:"PROVICE_NATURAL_NUM",value3:"E_NATURAL_RATE"},o=greatColor):3==e?(a=[{key:"value",name:"示范村达标比例",valueSuffix:"%"},{key:"value2",name:"相对贫困村数",valueSuffix:"个"},{key:"value3",name:"示范村达标村数",valueSuffix:"个"}],l={key:"PAC",value:"E_NATURAL_RATE",value2:"PROVICE_NATURAL_NUM",value3:"E_NATURAL_NUM"},o=greatColor):4==e?(a=[{key:"value",name:"完成提升创建村数",valueSuffix:"个"},{key:"value2",name:"相对贫困村数",valueSuffix:"个"},{key:"value3",name:"完成提升创建村比例",valueSuffix:"%"}],l={key:"PAC",value:"P_NATURAL_NUM",value2:"PROVICE_NATURAL_NUM",value3:"P_NATURAL_RATE"},o=greatColor):5==e?(a=[{key:"value",name:"完成提升创建村比例",valueSuffix:"%"},{key:"value2",name:"相对贫困村数",valueSuffix:"个"},{key:"value3",name:"完成提升创建村数",valueSuffix:"个"}],l={key:"PAC",value:"P_NATURAL_RATE",value2:"PROVICE_NATURAL_NUM",value3:"P_NATURAL_NUM"},o=greatColor):6==e?(a=[{key:"value",name:"20户以上自然村数",valueSuffix:"个"},{key:"value2",name:"自然村达标村数",valueSuffix:"个"},{key:"value3",name:"自然村达标村比例",valueSuffix:"%"}],l={key:"PAC",value:"NATURAL_NUM",value2:"COMPLETE_MODEL_NUM",value3:"COMPLETE_MODEL_RATE"},o=badColor):7==e?(a=[{key:"value",name:"自然村达标村数",valueSuffix:"个"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value3",name:"自然村达标村比例",valueSuffix:"%"}],l={key:"PAC",value:"COMPLETE_MODEL_NUM",value2:"NATURAL_NUM",value3:"COMPLETE_MODEL_RATE"},o=greatColor):8==e?(a=[{key:"value",name:"自然村达标村比例",valueSuffix:"%"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value3",name:"自然村达标村数",valueSuffix:"个"}],l={key:"PAC",value:"COMPLETE_MODEL_RATE",value2:"NATURAL_NUM",value3:"COMPLETE_MODEL_NUM"},o=greatColor):9==e?(a=[{key:"value",name:"完成提升创建自然村数",valueSuffix:"个"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value3",name:"完成提升创建自然村比例",valueSuffix:"%"}],l={key:"PAC",value:"COMPLETE_UPGRADE_NUM",value2:"NATURAL_NUM",value3:"COMPLETE_UPGRADE_RATE"},o=greatColor):10==e&&(a=[{key:"value3",name:"完成提升创建自然村比例",valueSuffix:"%"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value",name:"完成提升创建自然村数",valueSuffix:"个"}],l={key:"PAC",value:"COMPLETE_UPGRADE_RATE",value2:"NATURAL_NUM",value3:"COMPLETE_UPGRADE_NUM"},o=greatColor),Highmap.mybatis.reloadData(Highmap.mapid,queryName,{type:e,scope:scope,month:statTime,helppac:helppac},l,a,o)}function re(e){var a=e.properties.PAC;e.properties.name;"PKC"==e.properties.type&&$.poorFile.showCountryPhoto(a,"pop")}function test(){alert(1)}function changeData(e,a,l){$.ajax({type:"POST",url:ctx+"/a/map/mapPac",dataType:"json",data:{pacid:a,level:l},success:function(e){var a=e.pac,o={hasCountryFile:!1};loading_api=changeDataDistrict(levelMap.get(l),a,o)}})}function showpoint(e,a){var l={};if(a<5){l.isLoadPoint=!0,l.isRemote=!0;var o=2;a>1&&(o=3);var u={queryName:"com.aspire.birp.modules.antiPoverty.dao.ExampleCountryMapDao.queryMappiontGeoForCountry",parameters:{month:statTime,buildStatus:"1",helppac:helppac},mapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",longitude:"LONGITUDE",latitude:"LATITUDE",type:"POINT_TYPE"},pointName:"示范村达标",pointVisible:!1,pointColor:"#009311",radius:o},t={queryName:"com.aspire.birp.modules.antiPoverty.dao.ExampleCountryMapDao.queryMappiontGeoForCountry",parameters:{month:statTime,buildStatus:"0",helppac:helppac},mapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",longitude:"LONGITUDE",latitude:"LATITUDE",type:"POINT_TYPE"},pointName:"示范村建设中",pointVisible:!1,pointColor:"#ffff32",radius:o},i={queryName:"com.aspire.birp.modules.antiPoverty.dao.ExampleCountryMapDao.queryMappiontGeoForCountry",parameters:{month:statTime,buildStatus:"-1",helppac:helppac},mapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",longitude:"LONGITUDE",latitude:"LATITUDE",type:"POINT_TYPE"},pointName:"未启动的村",pointVisible:!1,pointColor:"#f33d93",radius:o};l.points=[u,t,i]}else l.isLoadPoint=!1;return l}function fan(e,a){showLoadingMask(),$.ajax({type:"POST",url:ctx+"/a/map/mapPac",dataType:"json",data:{pacid:e,level:a},success:function(e){var l=e.pac,o={hasCountryFile:!1};loading_api=changeDataDistrict(levelMap.get(a),l,o),closeLoading()},error:function(e){loading_api.onError()}})}function closeLoading(){waitLoad?loading_api.onSuccess():waitLoad=setInterval(function(){var e=!1;null!==loading_api&&(e=!0),e&&(loading_api.onSuccess(),clearInterval(waitLoad))},20)}function dataMapBack(){Highmap.mapObject.drillUp()}var loading_api=null,badColor=["#91d4ff","#2e5fff","#ff0000"],greatColor=["#91d4ff","#2e5fff","#6bdb1f"],levelMap=new Map;levelMap.put(1,"province"),levelMap.put(2,"city"),levelMap.put(3,"county"),levelMap.put(4,"town"),levelMap.put(5,"country");var type=1,scope="1",statTime="",helppac="999",queryName="com.aspire.birp.modules.antiPoverty.dao.ExampleCountryMapDao.queryEcMapData";$(function(){var e=getDate();e&&e.then(function(e){var a=initOption(e.mapPac,e.mapName,e.userPac,e.userLevel,e.geoPath);statTime=e.ecStatMonth,helppac=e.helppac,Highmap.mybatis.Map("map",queryName,{type:type,scope:scope,month:statTime,helppac:helppac},{key:"PAC",value:"COMPLETE_MODEL_NUM",value2:"NATURAL_NUM",value3:"COMPLETE_MODEL_RATE"},"PAC:"+e.mapPac,"PAC",a),changeData(null,e.userPac,e.userLevel)})});var waitLoad=null;