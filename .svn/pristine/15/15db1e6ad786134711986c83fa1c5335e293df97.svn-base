!function(t){var e=t.getOptions(),n=e.plotOptions,i=t.seriesTypes,r=t.merge,o=function(){},s=t.each,a=t.pick;n.funnel=r(n.pie,{animation:!1,center:["50%","50%"],width:"90%",neckWidth:"30%",height:"100%",neckHeight:"25%",reversed:!1,dataLabels:{connectorWidth:1,connectorColor:"#606060"},size:!0,states:{select:{color:"#C0C0C0",borderColor:"#000000",shadow:!1}}}),i.funnel=t.extendClass(i.pie,{type:"funnel",animate:o,translate:function(){var t,e,n,i,r,a,h,l,p,c,d,u=function(t,e){return/%$/.test(t)?e*parseInt(t,10)/100:parseInt(t,10)},f=0,g=this.chart,y=this.options,b=y.reversed,k=g.plotWidth,C=g.plotHeight,m=0,v=u((g=y.center)[0],k),W=u(g[1],C),w=u(y.width,k),L=u(y.height,C),H=u(y.neckWidth,k),Y=u(y.neckHeight,C),A=L-Y,u=this.data,O="left"===y.dataLabels.position?1:0;this.getWidthAt=e=function(t){return t>L-Y||L===Y?H:H+(L-Y-t)/(L-Y)*(w-H)},this.getX=function(t,n){return v+(n?-1:1)*(e(b?C-t:t)/2+y.dataLabels.distance)},this.center=[v,W,L],this.centerX=v,s(u,function(t){f+=t.y}),s(u,function(s){d=null,i=f?s.y/f:0,p=(a=W-L/2+m*L)+i*L,t=e(a),h=(r=v-t/2)+t,t=e(p),c=(l=v-t/2)+t,a>A?(r=l=v-H/2,h=c=v+H/2):p>A&&(d=p,t=e(A),l=v-t/2,c=l+t,p=A),b&&(a=L-a,p=L-p,d=d?L-d:null),n=["M",r,a,"L",h,a,c,p],d&&n.push(c,d,l,d),n.push(l,p,"Z"),s.shapeType="path",s.shapeArgs={d:n},s.percentage=100*i,s.plotX=v,s.plotY=(a+(d||p))/2,s.tooltipPos=[v,s.plotY],s.slice=o,s.half=O,m+=i})},drawPoints:function(){var t=this,e=t.options,n=t.chart.renderer;s(t.data,function(i){var r=i.options,o=i.graphic,s=i.shapeArgs;o?o.animate(s):i.graphic=n.path(s).attr({fill:i.color,stroke:a(r.borderColor,e.borderColor),"stroke-width":a(r.borderWidth,e.borderWidth)}).add(t.group)})},sortByAngle:function(t){t.sort(function(t,e){return t.plotY-e.plotY})},drawDataLabels:function(){var t,e,n,r,o,s=this.data,a=this.options.dataLabels.distance,h=s.length;for(this.center[2]-=2*a;h--;)n=s[h],e=(t=n.half)?1:-1,o=n.plotY,r=this.getX(o,t),n.labelPos=[0,o,r+(a-5)*e,o,r+a*e,o,t?"right":"left",0];i.pie.prototype.drawDataLabels.call(this)}}),e.plotOptions.pyramid=t.merge(e.plotOptions.funnel,{neckWidth:"0%",neckHeight:"0%",reversed:!0}),t.seriesTypes.pyramid=t.extendClass(t.seriesTypes.funnel,{type:"pyramid"})}(Highcharts);