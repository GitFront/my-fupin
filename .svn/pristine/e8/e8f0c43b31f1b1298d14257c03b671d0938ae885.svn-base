function initOption(e,a){return{title:!1,mapName:"广东省",height:"550",authInfo:{userPac:e,userLevel:a},fontFamily:"Microsoft YaHei",topNode:"440000000000",isLayerLoad:!0,color:{backgroundColor:"#1f1e30",borderColor:"#1d1a29",seriesNullColor:"#56627c",seriesBorderColor:"#212832",seriesSelectColor:"#f3e924",dataLabelColor:"#FFF",tooltipNameColor:"#f3e924",tooltipValueColor:"#f3e924",tooltipMinorValueColor:"#FFFFFF",tooltipBackgroundColor:"#1d1a28",tooltipBorderColor:"#76d1fd"},pointLoader:{isLoadPoint:!0,isRemote:!0,doSetPoint:"showpoint"},mapLoader:{isRemote:!0,remoteType:"common",commonQueryName:"aspire.bi.common.povertygeometry.queryMapGeoData",commonMapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",drillKey:"PAC",geometry:"GEOMETRY",ifFurtherPoor:"IF_FURTHER_POOR"}},showPoint:!0,colorStops:greatColor,legend:{enabled:!0,legendFloat:!0,legendAlign:"bottom",backgroundColor:"rgba(29,26,40,0.7)",x:-9,y:-5},drillUpButton:{relativeTo:"spacingBox",y:30,x:-30,fill:"#6cc3ed",strokeWidth:1,stroke:"#87e6fa",r:3,fontColor:"#1c1925",fontSize:13,selectColor:"#3bb0c9"},navigation:!0,navigationButton:!1,valueDecimal:2,parentKey:"PPAC",drillKey:"drillKey",valueMapper:[{key:"value",name:"自然村达标村数",valueSuffix:"个"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value3",name:"自然村达标村比例",valueSuffix:"%"}],doClick:"re",doDrilldown:"changeData",doDrillup:"fan",setLoading:["showLoadingMask","closeLoading"]}}function getDate(){return $.ajax({type:"post",url:ctx+"/a/map/mapDate",dataType:"json"})}function loadMap(e){var a={},o={},l=[];1==e?(a=[{key:"value",name:"相对贫困村数",valueSuffix:"个"},{key:"value2",name:"示范村达标村数",valueSuffix:"个"},{key:"value3",name:"示范村达标比例",valueSuffix:"%"}],o={key:"PAC",value:"PROVICE_NATURAL_NUM",value2:"E_NATURAL_NUM",value3:"E_NATURAL_RATE"},l=badColor):2==e?(a=[{key:"value",name:"示范村达标村数",valueSuffix:"个"},{key:"value2",name:"相对贫困村数",valueSuffix:"个"},{key:"value3",name:"示范村达标比例",valueSuffix:"%"}],o={key:"PAC",value:"E_NATURAL_NUM",value2:"PROVICE_NATURAL_NUM",value3:"E_NATURAL_RATE"},l=greatColor):3==e?(a=[{key:"value",name:"示范村达标比例",valueSuffix:"%"},{key:"value2",name:"相对贫困村数",valueSuffix:"个"},{key:"value3",name:"示范村达标村数",valueSuffix:"个"}],o={key:"PAC",value:"E_NATURAL_RATE",value2:"PROVICE_NATURAL_NUM",value3:"E_NATURAL_NUM"},l=greatColor):4==e?(a=[{key:"value",name:"完成提升创建村数",valueSuffix:"个"},{key:"value2",name:"相对贫困村数",valueSuffix:"个"},{key:"value3",name:"完成提升创建村比例",valueSuffix:"%"}],o={key:"PAC",value:"P_NATURAL_NUM",value2:"PROVICE_NATURAL_NUM",value3:"P_NATURAL_RATE"},l=greatColor):5==e?(a=[{key:"value",name:"完成提升创建村比例",valueSuffix:"%"},{key:"value2",name:"相对贫困村数",valueSuffix:"个"},{key:"value3",name:"完成提升创建村数",valueSuffix:"个"}],o={key:"PAC",value:"P_NATURAL_RATE",value2:"PROVICE_NATURAL_NUM",value3:"P_NATURAL_NUM"},l=greatColor):6==e?(a=[{key:"value",name:"20户以上自然村数",valueSuffix:"个"},{key:"value2",name:"自然村达标村数",valueSuffix:"个"},{key:"value3",name:"自然村达标村比例",valueSuffix:"%"}],o={key:"PAC",value:"NATURAL_NUM",value2:"COMPLETE_MODEL_NUM",value3:"COMPLETE_MODEL_RATE"},l=badColor):7==e?(a=[{key:"value",name:"自然村达标村数",valueSuffix:"个"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value3",name:"自然村达标村比例",valueSuffix:"%"}],o={key:"PAC",value:"COMPLETE_MODEL_NUM",value2:"NATURAL_NUM",value3:"COMPLETE_MODEL_RATE"},l=greatColor):8==e?(a=[{key:"value",name:"自然村达标村比例",valueSuffix:"%"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value3",name:"自然村达标村数",valueSuffix:"个"}],o={key:"PAC",value:"COMPLETE_MODEL_RATE",value2:"NATURAL_NUM",value3:"COMPLETE_MODEL_NUM"},l=greatColor):9==e?(a=[{key:"value",name:"完成提升创建自然村数",valueSuffix:"个"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value3",name:"完成提升创建自然村比例",valueSuffix:"%"}],o={key:"PAC",value:"COMPLETE_UPGRADE_NUM",value2:"NATURAL_NUM",value3:"COMPLETE_UPGRADE_RATE"},l=greatColor):10==e&&(a=[{key:"value3",name:"完成提升创建自然村比例",valueSuffix:"%"},{key:"value2",name:"20户以上自然村数",valueSuffix:"个"},{key:"value",name:"完成提升创建自然村数",valueSuffix:"个"}],o={key:"PAC",value:"COMPLETE_UPGRADE_RATE",value2:"NATURAL_NUM",value3:"COMPLETE_UPGRADE_NUM"},l=greatColor),Highmap.mybatis.reloadData(chartid,queryName,{type:e,scope:scope,month:statTime},o,a,l)}function re(e){var a=e.properties.PAC;e.properties.name;"PKC"==e.properties.type&&$.poorFile.showCountryPhoto(a,"pop")}function test(){alert(1)}function changeData(e,a,o){$.ajax({type:"POST",url:ctx+"/a/map/mapPac",dataType:"json",data:{pacid:a,level:o},success:function(e){var a=e.pac,l={hasCountryFile:!1};loading_api=changeDataDistrict(levelMap.get(o),a,l)}})}function showpoint(e,a){var o={};if(a<5){o.isLoadPoint=!0,o.isRemote=!0;var l=2;a>1&&(l=3);var t={queryName:"com.aspire.birp.modules.antiPoverty.dao.ExampleCountryMapDao.queryMappiontGeoForCountry",parameters:{month:statTime,buildStatus:"达标"},mapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",longitude:"LONGITUDE",latitude:"LATITUDE",type:"POINT_TYPE"},pointName:"示范村达标",pointVisible:!1,pointColor:"#009311",radius:l},u={queryName:"com.aspire.birp.modules.antiPoverty.dao.ExampleCountryMapDao.queryMappiontGeoForCountry",parameters:{month:statTime,buildStatus:"建设中"},mapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",longitude:"LONGITUDE",latitude:"LATITUDE",type:"POINT_TYPE"},pointName:"示范村建设中",pointVisible:!1,pointColor:"#ffff32",radius:l},i={queryName:"com.aspire.birp.modules.antiPoverty.dao.ExampleCountryMapDao.queryMappiontGeoForCountry",parameters:{month:statTime,buildStatus:"未启动"},mapper:{name:"NAME",PAC:"PAC",PPAC:"PPAC",longitude:"LONGITUDE",latitude:"LATITUDE",type:"POINT_TYPE"},pointName:"未启动的村",pointVisible:!1,pointColor:"#f33d93",radius:l};o.points=[t,u,i]}else o.isLoadPoint=!1;return o}function fan(e,a){showLoadingMask(),$.ajax({type:"POST",url:ctx+"/a/map/mapPac",dataType:"json",data:{pacid:e,level:a},success:function(e){var o=e.pac,l={hasCountryFile:!1};loading_api=changeDataDistrict(levelMap.get(a),o,l),closeLoading()},error:function(e){loading_api.onError()}})}function closeLoading(){waitLoad?loading_api.onSuccess():waitLoad=setInterval(function(){var e=!1;null!==loading_api&&(e=!0),e&&(loading_api.onSuccess(),clearInterval(waitLoad))},20)}function dataMapBack(){Highmap.mapObject.drillUp()}var loading_api=null,badColor=["#91d4ff","#2e5fff","#ff0000"],greatColor=["#91d4ff","#2e5fff","#6bdb1f"],levelMap=new Map;levelMap.put(1,"province"),levelMap.put(2,"city"),levelMap.put(3,"county"),levelMap.put(4,"town"),levelMap.put(5,"country");var chartid="",type=1,scope="1",statTime="",queryName="com.aspire.birp.modules.antiPoverty.dao.ExampleCountryMapDao.queryEcMapData";$(function(){var e=getDate();e&&e.then(function(e){var a=initOption(e.userPac,e.userLevel);statTime=e.ecStatMonth,chartid=Highmap.mybatis.Map("map",queryName,{type:type,scope:scope,month:statTime},{key:"PAC",value:"COMPLETE_MODEL_NUM",value2:"NATURAL_NUM",value3:"COMPLETE_MODEL_RATE"},"countries/cn/custom/cn-gongdong","PAC",a),changeData(null,"440000000000",1)})});var waitLoad=null;