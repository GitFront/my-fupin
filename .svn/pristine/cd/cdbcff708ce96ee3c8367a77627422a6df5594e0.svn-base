var DATA_MAP_DATA_TYPE={AMOUNT_POOR_FAMILY:1,AMOUNT_POOR_PEOPLE:2,AMOUNT_SUCCESS_FAMILY:3,AMOUNT_SUCCESS_PEOPLE:4,RATE_PEOPLE:5,RATE_SUCCESS:6},DEFAULT_DATA_MAP_DATA_TYPE=DATA_MAP_DATA_TYPE.AMOUNT_SUCCESS_FAMILY;$(function(){function e(){ae.hasClass(F)?t():a()}function a(){ae.addClass(F)}function t(){ae.removeClass(F)}function n(){return $('<div class="chart"></div>')}function r(){function e(){0==t&&n&&hideLoadingMask()}function a(){hideLoadingMask()}var t=1,n=!1;return c(function(){t--,e()},a),{onSuccess:function(){n=!0,e()},onError:a}}function o(e){"undefined"!=typeof changeDataMapDataType&&changeDataMapDataType(e)}function i(e){"undefined"!=typeof changeDataMapDataScope&&changeDataMapDataScope(e)}function l(e){var a=e.area_name;Ae=e.area_desc,ee.text(a),Te==DEFAULT_AREA_SCOPE&&q.text(a),Ae?(z.show(),Z.removeClass("down")):(z.hide(),Z.addClass("down"))}function c(e,a){function t(e){var a=n();$("#blockPoorAnalysis").html(a),echarts.init(a[0]).setOption(commonEchartConfig.genPoorAnalysisConfig(e))}function r(e){$("#blockCapital").html(template("tplCapital",e)),$("#linkCapital").on(x,function(){var e=$(this).attr("data-href");location.href=e+"?"+W({area_level:se,area_id:de})}),$("#linkProject").on(x,function(){var e=$(this).attr("data-href");location.href=e+"?"+W({area_level:se,area_id:de})}),echarts.init(document.getElementById("chartBubble")).setOption(commonEchartConfig.genChartBubbleConfig(e.chart_config_bubble))}function o(e){oe.html(template("tplAlarm",e))}function i(e){$("#blockAverage").html(template("tplAverage",e)),$("#chartAverageLabor").on(x,function(){$.dataMonitor.showDataMonitor({target:L})}),$("#chartAverageSociety").on(x,function(){$.dataMonitor.showDataMonitor({target:R})}),c("chartAverageLabor",e.chart_config_labor,s),c("chartAverageSociety",e.chart_config_society,d)}function c(e,a,t){var n=t(a),r=n.data,o=n.config;loadLiquidFillGauge(e,r,o)}function T(e){var a=$("#blockGuarantee");a.html(template("tplGuarantee"));var t=a.find(".chart-edu"),n=a.find(".chart-medical"),r=a.find(".chart-house"),o=echarts.init(t[0]),i=echarts.init(n[0]),l=echarts.init(r[0]);o.setOption(commonEchartConfig.genGuaranteeConfig(e.chart_config_edu)),i.setOption(commonEchartConfig.genGuaranteeConfig(e.chart_config_medical)),l.setOption(commonEchartConfig.genGuaranteeConfig(e.chart_config_house)),a.find("ul").on(x,"li",function(){var e;switch($(this).attr("data-target")){case O.TYPE:e=O;break;case N.TYPE:e=N;break;case M.TYPE:e=M}e&&$.dataMonitor.showDataMonitor({target:e})})}function A(e){e&&(re.html(template("tplBars",{list:e})),Vote.ListShow.init({id:"chartBars",percent:e.map(function(e){return e.percent/100}),width:re.find(".litem:first").width()}),Vote.ListShow.go())}function p(e){!function(){ce&&clearInterval(ce),ce=setInterval(function(){var a=parseInt((e-Date.now())/1e3),t=0,n=0,r=0,o=0;a>0&&(t=Math.floor(a/86400),n=Math.floor(a/3600)-24*t,r=Math.floor(a/60)-24*t*60-60*n,o=Math.floor(a)-24*t*60*60-60*n*60-60*r),t<=9&&(t="0"+t),n<=9&&(n="0"+n),r<=9&&(r="0"+r),o<=9&&(o="0"+o),$("#dayshow").html(t),$("#hourshow").html(n),$("#minuteshow").html(r),$("#secondshow").html(o)},1e3)}()}function u(e){var a=$("#blockTop");a.html(template("tplTopIndex",e)),a.children("ul").on(x,".data1 .col1,.data2 .col1",function(){$.dataMonitor.showDataMonitor({target:C})}).on(x,".data1 .col2,.data2 .col2",function(){$.dataMonitor.showDataMonitor({target:b})}),e.area_level==LEVELS.COUNTRY&&void 0!==e.score?a.addClass(V):a.removeClass(V)}function _(e){function a(){_.lastStat=e}_.lastStat||a(),function(e){$("#blockBottom").html(template("tplBottomIndex",{lastStat:_.lastStat,stat:e})),$("#blockBottom").find(".num.dynamic").each(m),a()}(e)}function m(e){var a=$(this);e=$.extend({},e||{},a.data("countToOptions")||{}),a.countTo(e)}X({url:URLS.URL_DATA_STATIC_DATA,data:{level:se,id:de,scope:Te},success:function(n){var c=n.code,s=n.data;0==c&&s?(l(s),p(s.time_end),i(s.average),T(s.guarantee),A(s.bars),o(s.alarm),r(s.capital),t(s.chart_config_poor_analysis),_(s.stat),u(j({},s.top_indexes,{area_level:s.area_level,LEVELS:LEVELS})),e&&e()):a&&a()},error:function(){a&&a()}})}function s(e){var a={},t=e.percent,n=liquidFillGaugeDefaultSettings();return n.circleThickness=.1,n.circleFillGap=.1,"100"==t?(n.circleColor="#f3e824",n.textColor="#f3e824",n.waveTextColor="#f3e824",n.waveColor="#322e41"):(n.circleColor="#6cc3ff",n.textColor="#fff",n.waveTextColor="#fff",n.waveColor="#6cc3ff"),n.textVertPosition=.5,n.waveAnimateTime=1e3,n.waveHeight=.05,n.waveAnimate=!0,n.waveRise=!1,n.waveHeightScaling=!1,n.waveOffset=.25,n.textSize=.75,n.waveCount=3,n.displayPercent=!1,n.maxValue=7365,a.config=n,a.data=t,a}function d(e){var a={},t=e.percent,n=liquidFillGaugeDefaultSettings();return n.circleThickness=.1,n.circleFillGap=.1,"100"==t?(n.circleColor="#f3e824",n.textColor="#f3e824",n.waveTextColor="#f3e824",n.waveColor="#322e41"):(n.circleColor="#6cc3ff",n.textColor="#fff",n.waveTextColor="#fff",n.waveColor="#6cc3ff"),n.textVertPosition=.5,n.waveAnimateTime=1e3,n.waveHeight=.05,n.waveAnimate=!0,n.waveRise=!1,n.waveHeightScaling=!1,n.waveOffset=.25,n.textSize=.75,n.waveCount=3,a.config=n,a.data=t,a}var T=$.monitorHelper,A=$.components.CONST_RADIO_VALUES,p=$.components.CONST_CHECK_VALUES,u=$.components.ROW_KEY,_=A.POOR_ATTRIBUTE,m=A.EDU_LEVELS,h=A.LABOR_ATTRIBUTE,E=p.EXCEPTION_TYPE,f=T.DATA_MONITOR_SECOND_POPUP,C={TITLE:"扶贫对象监控",TYPE:"poor",TAB:[{NAME:"变动管理",VALUE:"change_management"},{NAME:"变动分析",VALUE:"change_analysis"},{NAME:"变动排序",VALUE:"change_order",CONFIG_ORDER:"true"}]},b={TITLE:"脱贫成效监控",TYPE:"result",TAB:[{NAME:"计划管理",VALUE:"plan_management"},{NAME:"预脱贫分析",VALUE:"result_analysis"},{NAME:"未脱贫分析",VALUE:"not_success_analysis"},{NAME:"成效排序",VALUE:"result_order",CONFIG_ORDER:"true"}]},L={TITLE:"人均可支配收入监控",TYPE:"average_income",TAB:[{NAME:"收入管理",VALUE:"income_management"},{NAME:"预脱贫户分析",VALUE:"success_analysis"},{NAME:"未脱贫户分析",VALUE:"poor_analysis"},{NAME:"收入排序",VALUE:"income_order",CONFIG_ORDER:"true"}],SECONDTAB:{SUCCESS_ANALYSIS_TRANSFERRED_PAYMENT:{TITLE:"预脱贫户分析 > 转移性支出分析",VALUE:"success_analysis_transferred_payment"},SUCCESS_ANALYSIS_TRANSFERRED_INCOME:{TITLE:"预脱贫户分析 > 转移性收入分析",VALUE:"success_analysis_transferred_income"},POOR_ANALYSIS_TRANSFERRED_PAYMENT:{TITLE:"未脱贫户分析 > 转移性支出分析",VALUE:"poor_analysis_transferred_payment"},POOR_ANALYSIS_TRANSFERRED_INCOME:{TITLE:"未脱贫户分析 > 转移性收入分析",VALUE:"poor_analysis_transferred_income"}}},R={TITLE:"低保五保政策落实监控",TYPE:"five_low",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},O={TITLE:"教育政策落实监控",TYPE:"edu",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},N={TITLE:"医疗政策落实监控",TYPE:"medical_policy",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},M={TITLE:"住房政策落实监控",TYPE:"house",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},S={TITLE:"道路硬底化监控",TYPE:"road",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},v={TITLE:"安全饮水监控",TYPE:"water",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},I={TITLE:"生活用电监控",TYPE:"electricity",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},g={TITLE:"医疗设施监控",TYPE:"medical_facility",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},D={TITLE:"通广播电视监控",TYPE:"broadcast",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},P={TITLE:"贫困分析",TYPE:"poor_analysis",TAB:[{NAME:"贫困分析",VALUE:"poor_analysis"}]},U={TITLE:"网络覆盖监控",TYPE:"net",TAB:[{NAME:"落实管理",VALUE:"implement_management"},{NAME:"落实分析",VALUE:"implement_analysis"},{NAME:"落实排序",VALUE:"implement_order",CONFIG_ORDER:"true"}]},y={TITLE:"贫困识别监控",TYPE:"alarmed_poor",TAB:[{NAME:"异常监控",VALUE:"exception_monitor"},{NAME:"异常排序",VALUE:"exception_order",CONFIG_ORDER:"true"}]},k={TITLE:"建档立卡异常记录监控",TYPE:"alarmed_records",TAB:[{NAME:"异常监控",VALUE:"exception_monitor"},{NAME:"异常排序",VALUE:"exception_order",CONFIG_ORDER:"true"}]},w={TITLE:"帮扶资金监控",TYPE:"alarmed_money",TAB:[{NAME:"资金监控",VALUE:"money_monitor"},{NAME:"资金排序",VALUE:"money_order",CONFIG_ORDER:"true"}]},B={TITLE:"贫困户走访监控",TYPE:"alarmed_visit",TAB:[{NAME:"走访监控",VALUE:"visit_monitor"},{NAME:"走访排序",VALUE:"visit_order",CONFIG_ORDER:"true"}]},V="level-country",F="show",Y="active",x="click",H="change",G=window,j=$.extend,W=$.param,X=Helpers.ajax,K=T.renderDataMonitorTree,J=$("body"),q=$("#btnArea"),z=$("#btnAreaDesc"),Q=$("#btnPoorFamilyList"),Z=$("#poorFamilyListWrap"),ee=$("#scopeAreaName"),ae=$("#scopeList"),te=$("#btnCountryFile"),ne=$("#blockMapDataTypes"),re=$("#blockBars"),oe=$("#blockAlarm"),ie=$("#blockPoorAnalysisWrap"),le=$.poorFile,ce=null,se=DEFAULT_LEVEL,de=DEFAULT_AREA_ID,Te=DEFAULT_AREA_SCOPE,Ae=null;!function(){showLoadingMask(),X({url:URLS.URL_LOGIN_INDEX_MSG,data:{},success:function(e){var a=e.code,t=e.data;0==a&&t&&(console.log(t),1==t.show&&Helpers.showAlertDialog({title:"通知",content:t.msg,btnPosText:"我知道了",btnPosCB:function(e){e.hide()}})),hideLoadingMask()},error:function(){hideLoadingMask()}}),te.on(x,function(){le.showCountryFile(de)}),q.on(x,function(a){a.stopPropagation(),e()}),ae.on(x,function(e){e.stopPropagation()}).on(x,"li",function(){var e=$(this),a=e.attr("data-scope");e.hasClass(Y)||(e.addClass(Y).siblings().removeClass(Y),i(Te=a),r(),q.text(e.text()),t())}),J.on(x,t),ie.on(x,".link-more",function(){$.dataMonitor.showDataMonitor({target:P})}),re.on(x,".vl-item",function(){var e;switch($(this).attr("data-name")){case"道路硬化":e=S;break;case"安全饮水":e=v;break;case"生活用电":e=I;break;case"医疗设施":e=g;break;case"广播电视":e=D;break;case"网络覆盖":e=U}e&&$.dataMonitor.showDataMonitor({target:e})}),oe.on(x,"td b",function(){var e;switch($(this).attr("data-target")){case"alarmed_family":e=y;break;case"alarmed_records":e=k;break;case"alarmed_country":e=w;break;case"alarmed_family_not_visited":e=B}e&&$.dataMonitor.showDataMonitor({target:e})}),ne.on(H,'[name="map_data_type"]',function(){o($(this).val())}),Q.on(x,function(){function e(t){showLoadingMask(),X({url:URLS.URL_DATA_POOR_FAMILY_LIST,data:{level:se,id:de,page:t.table_page||1},success:function(n){var o=n.code,i=n.data;if(0==o&&i){var l={tableData:i.table,table_page:t.table_page};r.html(template("tplConfigTable",i.table)),r.append('<i class="icon icon-down"></i>'),a(r),t.tableData.pagination&&$.components.tableEvent.bindPagination(r,l,e)}hideLoadingMask()},error:function(){hideLoadingMask()}})}function a(e){e.data("action-bound")||(e.on("click","td[data-action-type=area_data]",function(e){var a=$(this),t=a.data("action-area-level"),r=a.data("action-area-id");n.secondPopup.openAreaData(j({},opts,{area_level:t,area_id:r}))}).on("click","td[data-action-type=country_file]",function(e){var a=$(this).data("action-area-id");$.poorFile.showCountryFile(a)}).on("click","td[data-action-type=family_file]",function(e){var a=$(this).data("action-family-id");$.poorFile.showFamilyFile(a)}).on("click",".detail-btn",function(e){n.secondPopup.openDetail(opts)}).on("click",".export-btn",function(e){t($(this).data("export-url"))}),e.data("action-bound",!0))}function t(e){var a=1e3,t=$("#exportContent");X({url:e,success:function(e){function r(e){t.html(template("tplExportContent",e))}var o=e.code,i=e.data;if(0==o&&i){var l=null;!function(e){function t(){X({url:URLS.URL_DATA_CHECK_EXPORT_RESULT,data:{export_task_id:e},success:function(e){var o=e.code,i=e.data,c=e.msg,s=i.stat;0==o&&i&&(1==s?(r(i),l=setTimeout(t,a)):(2==s?Helpers.showAlertDialog({content:"生成完成",btnPosText:"下载",btnPosCB:function(e){window.open(i.url),e.hide()}}):Helpers.showAlertDialog({title:"导出错误",content:c}),n.exportWrap.close()))},error:function(){}})}n.exportWrap.open(),r({progress:0}),t()}(i.export_task_id)}},error:function(){}})}var n=$.dataMonitor,r=$("#poorList");if(r.find(".export-btn").data("export-url"),!r.hasClass("hide"))return r.addClass("hide"),0;r.removeClass("hide"),showLoadingMask(),X({url:URLS.URL_DATA_POOR_FAMILY_LIST,data:{level:se,id:de,page:1},success:function(t){var n=t.code,o=t.data;if(0==n&&o){var i={tableData:o.table,table_page:1};r.html(template("tplConfigTable",i.tableData)),r.append('<i class="icon icon-down"></i>'),a(r),i.tableData.pagination&&$.components.tableEvent.bindPagination(r,i,e)}hideLoadingMask()},error:function(){hideLoadingMask()}})}),z.on(x,function(){$.dialog({id:"dialogAreaDesc",classDialog:"area-desc-dialog",classModalBg:"area-desc-dialog-mask",dialogMode:"center",title:null,content:['<div class="content-wrapper">',"<div>",Ae,"</div>","</div>"].join(""),btns:null}).$dialog.find(".content-wrapper").jScrollPane(commonJSPConfig)})}(),G.changeDataDistrict=function(e,a,t){console.log(111),e&&(se=e,$.dataMonitor.treeCurLevel=se),a&&(de=a,$.dataMonitor.treeCurAreaID=de);var n=(t=j({hasCountryFile:!1},t)).hasCountryFile,o=$("#poorList");return se==LEVELS.TOWN||se==LEVELS.COUNTRY?(Z.show(),o.hasClass("hide")||(o.addClass("hide"),document.getElementById("btnPoorFamilyList").click())):(o.addClass("hide"),Z.hide()),se==LEVELS.COUNTRY?(q.hide(),n?te.show():te.hide(),ne.hide(),z.addClass(V),Z.addClass(V)):(q.show(),te.hide(),z.removeClass(V),Z.removeClass(V),ne.show()),r()},$.dataMonitor={currentTarget:null,$analyseContent:null,curAreaName:"",treeCurLevel:se,treeCurAreaID:de,firstTabState:null,init:function(){this.loadMonitorTpl(),J.on(x,function(){var e=$(".select-box");e.removeClass("selected").find(".select-list").hide(),e.find(".arrow").removeClass("arrow-on")})},loadMonitorTpl:function(){var e=this;$.ajax({url:URLS.URL_TPL_DATA_MONITOR+"?_="+(new Date).getTime(),async:!1,success:function(a){$("body").append(a),e.$monitorContent=$("#monitorContent")}})},bindHeader:function(){var e=this;$("#popupPoorMonitor").off(x).on(x,".js-monitor-close",e.popup.close),$("#monitorHeader .monitor-nav").on("click","li",function(a){var t=$(this),n={};n.configOrder=t.data("config-order"),t.siblings().removeClass("active"),t.addClass("active"),e.renderTree(n)}),$("#monitorHeader .tab-year").on("click","i",function(a){var t={};if($(this).hasClass("js-forbid"))return 0;t.configOrder=$(".monitor-nav li.active").data("config-order"),e.renderTree(t)});var a=$("#monitorHeader");a.find(".js-select-box").on("click",function(){var e=$(this),t=e.find(".select-list"),n=e.parents(".select-area").find(".js-select-box").not(this);return e.toggleClass("selected"),t.toggle(),e.find(".arrow").toggleClass("arrow-on"),n.removeClass("selected").find(".select-list").hide(),n.find(".arrow").removeClass("arrow-on"),function(){var e=t.innerWidth(),a=t.innerHeight();e=e>150?150:e,t.find(".jspPane").length<1&&t.width(e),a>320&&t.jScrollPane(commonJSPConfig)}(),a.find(".download-select li").on("click",function(){var e=$(this).attr("data-export-url");$.components.tableEvent.exportTable(e)}),!1})},setSecondHeader:function(e,a){var t=$("#monitorHeader #secondTabTitle"),n=$("#monitorHeader .js-monitor-close");t.text(a).removeClass("hide"),t.attr("data-tabtype",e.tabtype),n.addClass("second-tab-close")},onSecondTab:function(){return!$("#monitorHeader #secondTabTitle").hasClass("hide")},pushFirstTabState:function(e){var a=this;a.firstTabState=j({area_level:a.treeCurLevel,area_id:a.treeCurAreaID},e)},popFirstTabState:function(){var e=this,a=e.firstTabState;return e.firstTabState=null,a},renderSecondTabContent:function(e){},popup:{open:function(){$("#popupPoorMonitor").show()},close:function(){var e=$(this),a=$.dataMonitor,t=$("#monitorHeader #secondTabTitle");$("#monitorHeader .js-monitor-close");if(e.hasClass("second-tab-close")){t.addClass("hide"),e.removeClass("second-tab-close");var n=a.popFirstTabState();n&&a.renderTree(j(n,{year:a.getCurYear()}))}else a.treeCurLevel=se,a.treeCurAreaID=de,$("#popupPoorMonitor").hide()}},secondPopup:{openDetail:function(e){var a=$.dataMonitor,t=this,n=$("#popupPoorMonitorSecondWrap");n.html(template("tplSecondPopup")),t.areaSelect.render(e,function(){n.show(),t.bindSelectArea(),a.renderContent(j({},e,{target:f.DETAIL_LIST})),t.bindClosePopup()})},openAreaData:function(e){var a=$.dataMonitor,t=$("#popupPoorMonitorSecondWrap");t.html(template("tplSecondPopup")),t.show(),a.renderContent(j({},e,{target:f.AREA_DATA})),this.bindClosePopup()},close:function(){$("#popupPoorMonitorSecondWrap").hide()},bindClosePopup:function(){$("#popupPoorMonitorSecond").on(x,".js-second-popup-close",this.close)},bindSelectArea:function(){var e=$("#popupPoorMonitorSecond");e.off("click",".js-select-box",this.areaSelect.toggle).off("click",".js-select-list li",this.areaSelect.choose),e.on("click",".js-select-box",this.areaSelect.toggle).on("click",".js-select-list li",this.areaSelect.choose)},areaSelect:{toggle:function(){var e=$(this),a=e.find(".select-list"),t=e.parents(".select-area").find(".js-select-box").not(this);return e.hasClass("forbid")?0:(e.toggleClass("selected"),a.toggle(),e.find(".arrow").toggleClass("arrow-on"),t.removeClass("selected").find(".select-list").hide(),t.find(".arrow").removeClass("arrow-on"),function(){var e=a.innerWidth(),t=a.innerHeight();e=e>150?150:e,a.find(".jspPane").length<1&&a.width(e),t>320&&a.jScrollPane(commonJSPConfig)}(),!1)},choose:function(){function e(){var e={url:URLS.URL_DATA_MONITOR_DETAIL_TABLE,params_url:URLS.URL_DATA_MONITOR_DETAIL_PARAMS_INFO,secondPopup:!0,secondPopupType:"detail_list",area_level:o,area_id:r,year:i,wintype:t.getWinType(),tabtype:t.getCurTabType()};t.buildConfigCheckArea(e)}var a=$(this),t=$.dataMonitor,n=$("#popupPoorMonitorSecond #basicInfo .select-area");if(a.parents("#areaBarrio").length>0){var r=a.attr("data-id"),o=a.closest(".js-select-box").attr("level"),i=n.find("#selectYear .select-box>span").attr("data-value");e()}if(a.parents("#selectYear").length>0){var i=a.attr("data-year"),o=n.find("#areaBarrio .js-select-box").last().attr("level");""==(r=n.find("#areaBarrio .js-select-box").last().attr("selected_id"))&&(r=n.find("#areaBarrio .js-select-box").eq(-2).attr("selected_id"),o=n.find("#areaBarrio .js-select-box").eq(-2).attr("level")),e()}showLoadingMask(),X({url:URLS.URL_DATA_MONITOR_DETAIL_BASIC_INFO,data:{level:o,id:r,year:i,wintype:t.getWinType(),tabtype:t.getCurTabType()},success:function(e){var a=e.code,t=e.data;0==a&&t?(t.hasSelectArea=!0,$("#popupPoorMonitorSecond").find(".basic-info-wrap").html(template("tplSecondPopupBasicInfo",t))):hideLoadingMask()},error:function(){hideLoadingMask()}})},render:function(e,a){var t=$.dataMonitor,n={},r={level:e.area_level,id:e.area_id,year:e.year,wintype:t.getWinType(),tabtype:t.getCurTabType(),page:e.table_page||1};showLoadingMask(),X({url:URLS.URL_DATA_MONITOR_DETAIL_BASIC_INFO,data:j(r,n),success:function(e){var t=e.code,n=e.data;n.AREA_SCOPE=AREA_SCOPE,0==t&&n?(n.hasSelectArea=!0,$("#secondPopupTitle").text(n.win_title),$("#popupPoorMonitorSecond").find(".basic-info-wrap").html(template("tplSecondPopupBasicInfo",n)),$.isFunction(a)&&a()):hideLoadingMask()},error:function(){hideLoadingMask()}})}}},bindSecondTab:function(e,a){var t=this,n=t.getWinType(),r=$("#"+e.tabName+"CheckArea"),o=a,i=o.VALUE;e=j({},e,{checkActiveObj:t.getCheckAreaActiveObj(r)});var l=j({},e,{target:n+"_"+i,tabtype:i});t.pushFirstTabState(e),t.setSecondHeader(l,o.TITLE),t.renderTree(l)},exportWrap:{open:function(){$("#exportWrap").show()},close:function(){$("#exportWrap").hide()}},getWinType:function(){return $("#monitorHeader .header-title").data("win-type")},getCurYear:function(){return $("#monitorHeader .tab-year .active").data("value")},getCurTabType:function(){return this.onSecondTab()?$("#monitorHeader #secondTabTitle").attr("data-tabtype"):$("#monitorHeader .monitor-nav .active").data("tab-type")},getCheckAreaActiveObj:function(e){var a={};return e.find(".radio-row").each(function(e,t){var n=$(this),r=n.data("key"),o=n.find(".radio.active").data("value");a[r]=o}),e.find(".check-row").each(function(e,t){var n=$(this),r=[],o=n.data("key");n.find(".check.active").each(function(e,a){var t=$(this).data("value");t&&r.push(t)}),a[o]=r.join(",")}),a},buildCheckAreaHtml:function(e,a){for(var t=$.components.buildCheckRow,n='<table class="check-area-table">',r=0;r<e.length;r++){var o=0;if("object"==typeof e[r]){for(var i in a)if(i==e[r].rowKey){n+=t(e[r],a[i]),o=1;break}}else for(var i in a)if(i==e[r]){n+=t(e[r],a[i]),o=1;break}0==o&&(n+=t(e[r]))}return n+"</table>"},bindCheckArea:function(e,a){var t,n=this;e=j({},e),(t=e.secondPopup?$("#"+e.paramsTplId):$("#"+e.tabName+"CheckArea")).off("click").on("click",".radio-row .radio",function(r){var o=$(this);if(e=j({},e),o.hasClass("disabled"))return 0;if(o.siblings().removeClass("active"),o.addClass("active"),!o.data("has-own-handler"))if(o[0].hasAttribute("data-url"))e.url=URLS[o.attr("data-url")],e.tplID="tpl"+e.TabName+"ChartTable",e.secondPopup?n.renderSecondPopupTable(e,a):n.renderChartTable(e,a);else{var i,l;t.find(".radio-row .radio.active").each(function(e,a){$(this)[0].hasAttribute("data-url")&&(i=$(this).attr("data-url"),l=$(this).attr("data-tpl-id"))}),e.url=URLS[i]||e.url,e.tplID=l||e.tplID,e.secondPopup?n.renderSecondPopupTable(e,a):n.renderChartTable(e,a)}}),t.on("click",".check-row .check",function(t){var r=$(this);if(e=j({},e),r.hasClass("disabled"))return 0;r.toggleClass("active"),e.secondPopup?n.renderSecondPopupTable(e,a):n.renderChartTable(e,a)})},buildCheckArea:function(e,a,t,n){var r=this,o=$("#"+e.tabName+"CheckArea"),i=r.buildCheckAreaHtml(a,e.checkActiveObj||t);o.html(i),r.renderContentBasicInfo(e),r.bindCheckArea(e,n)},buildConfigCheckArea:function(e){var a=this;e.secondPopup&&(e.paramsTplId="paramsCheckArea"),a.renderConfigCheckArea(e),e.secondPopup||a.renderContentBasicInfo(e),a.bindCheckArea(e)},renderWin:function(e){var a=this;showLoadingMask(),X({url:URLS.URL_DATA_MONITOR_BASIC_INFO,data:{level:se,id:de},success:function(t){var n=t.code,r=t.data;if(r=j({},r,e.target),0==n&&r){$("#monitorHeader").html(template("tplMonitorHeader",r));var o=$("#monitorHeader .tab-switch");$.components.tabSwitch(o,r.years.available_years,r.years.selected_value),a.bindHeader(),a.renderTree()}else hideLoadingMask()},error:function(){hideLoadingMask()}})},renderTree:function(e){var a=this;e=j({year:a.getCurYear(),area_level:a.treeCurLevel,area_id:a.treeCurAreaID,wintype:a.getWinType(),tabtype:a.getCurTabType()},e),K($("#monitorTree"),j({instance:a},e))},showDataMonitor:function(e){var a=this;a.renderWin(e),a.popup.open()},renderContent:function(e){$.dataMonitor,$("#monitorHeader #secondTabTitle");for(var a=e.target.split("_"),t=[],n="",r=0,o=a.length;r<o;r++)t.push(a[r].substring(0,1).toUpperCase()+a[r].substring(1));e.TabName=t.join(""),e.tabName=a[0]+t.join("").substring(a[0].length),n="render"+t.join(""),$.dataMonitor[n](e)},renderContentBasicInfo:function(e){var a=this,t=(e.TabName,a.getCurTabType()),n=$("#"+e.tabName+"CheckArea");showLoadingMask(),X({url:URLS.URL_DATA_MONITOR_CONTENT_BASIC_INFO,data:{level:e.area_level,id:e.area_id,year:e.year},success:function(e){if(t==a.getCurTabType()){var r=e.code,o=e.data;0==r&&o?n.find("[data-key='scope'] .radio").each(function(e,a){var t=$(this),n=e+1;o.scope_available[n]||t.addClass("disabled")}):hideLoadingMask()}},error:function(){hideLoadingMask()}})},renderConfigCheckArea:function(e){var a,t=this,n=(e.TabName,t.getWinType()),r=t.getCurTabType();a=e.paramsTplId?$("#"+e.paramsTplId):$("#"+e.tabName+"CheckArea"),showLoadingMask(),X({url:e.params_url,data:{level:e.area_level,id:e.area_id,year:e.year,wintype:n,tabtype:r},success:function(o){if(n==t.getWinType()&&r==t.getCurTabType()){var i=o.code,l=o.data;0==i&&l?(a.html(template("tplConfigCheckArea",l)),e.secondPopup?t.renderSecondPopupTable(e):t.renderChartTable(e)):hideLoadingMask()}},error:function(){hideLoadingMask()}})},renderChartTable:function(e,a){function t(){return e.wintype||l.getWinType()}function n(){return e.tabtype||l.getCurTabType()}function r(a){var t=[];for(var n in a)"chart_config"==n.substring(0,12)&&t.push({name:n,data:a[n]});for(var r=0;r<t.length;r++){var o=a[t[r].name],i=t[r].name.substring(13);if(e.chartHeaderId)l=e.chartHeaderId+$.components.underlineToCamel(i);else var l=e.tabName+"Chart"+$.components.underlineToCamel(i);echarts.init(document.getElementById(l)).setOption(commonEchartConfig[o.convert_method](o.config))}}var o,i,l=this,c=(e.TabName,e.tplID||"tpl"+e.TabName+"ChartTable"),s=t(),d=n();e=j({renderTable:!0,renderChart:!0},e),o=$("#"+e.tabName+"CheckArea"),i=$("#"+e.tabName+"ChartTable");var T={},A={level:e.area_level,id:e.area_id,year:e.year,wintype:s,tabtype:d,page:e.table_page||1};T=l.getCheckAreaActiveObj(o),showLoadingMask(),X({url:e.url,data:j(A,T),success:function(o){if(s==t()&&d==n()){var T=o.code,A=o.data;if(0==T&&A){i.html(template(c,A)),e.renderTable&&l.renderConfigTable(j({},e,{tableData:A.table,tableDetail:e.tableDetail,tableTplId:e.tableTplId,secondPopup:!1})),e.renderChart&&r(A);var p="active",u=i.find(".chart-tab");u.length>0&&u.each(function(){function a(e){t.attr("data-active",e).find("li[data-target="+e+"]").addClass(p).siblings().removeClass(p),n.find(".chart").addClass("hide"),n.find("#"+e).removeClass("hide")}var t=$(this),n=t.closest(".chart-item").find(".js-tab-charts-wrap");console.log(e.chartTab||t.attr("data-active")),a(e.chartTab||t.attr("data-active")),t.on(x,"li",function(){a($(this).data("target"))})});var _=l.$monitorContent.find(".page-content-wrap"),m=_.data("jsp");m?m.reinitialise():m=_.jScrollPane(commonJSPConfig).data("jsp"),$.isFunction(a)&&a()}hideLoadingMask()}},error:function(){hideLoadingMask()}})},renderConfigTable:function(e){function a(){o.data("action-bound")||(o.on("click","td[data-action-type=area_data]",function(a){var t=$(this),n=t.data("action-area-level"),r=t.data("action-area-id");i.secondPopup.openAreaData(j({},e,{area_level:n,area_id:r}))}).on("click","td[data-action-type=country_file]",function(e){var a=$(this).data("action-area-id");$.poorFile.showCountryFile(a)}).on("click","td[data-action-type=family_file]",function(e){var a=$(this).data("action-family-id");$.poorFile.showFamilyFile(a)}).on("click",".detail-btn",function(a){i.secondPopup.openDetail(e)}).on("click",".export-btn",function(e){t($(this).data("export-url"))}),o.data("action-bound",!0))}function t(e){var a=1e3,t=$("#exportContent");X({url:e,success:function(e){function n(e){t.html(template("tplExportContent",e))}var r=e.code,o=e.data;if(0==r&&o){var l=null;!function(e){function t(){X({url:URLS.URL_DATA_CHECK_EXPORT_RESULT,data:{export_task_id:e},success:function(e){var r=e.code,o=e.data,c=e.msg,s=o.stat;0==r&&o&&(1==s?(n(o),l=setTimeout(t,a)):(2==s?Helpers.showAlertDialog({content:"生成完成",btnPosText:"下载",btnPosCB:function(e){window.open(o.url),e.hide()}}):Helpers.showAlertDialog({title:"导出错误",content:c}),i.exportWrap.close()))},error:function(){}})}i.exportWrap.open(),n({progress:0}),t()}(o.export_task_id)}},error:function(){}})}function n(){var a=o.find(".table-pagination"),t=e.tableData.pagination.page_total,n=e.tableData.pagination.page_cur,r=e.tableData.pagination.page_cur+1,l=e.tableData.pagination.page_cur-1;a.on("click",".arrow-first",function(a){if(1==n)return 0;e.table_page=1,e.secondPopup?i.renderSecondPopupTable(e):i.renderChartTable(e)}).on("click",".arrow-end",function(a){if(n==t)return 0;e.table_page=t,e.secondPopup?i.renderSecondPopupTable(e):i.renderChartTable(e)}).on("click",".arrow-left",function(a){if(l<1)return 0;e.table_page=l,e.secondPopup?i.renderSecondPopupTable(e):i.renderChartTable(e)}).on("click",".arrow-right",function(a){if(r>t)return 0;e.table_page=r,e.secondPopup?i.renderSecondPopupTable(e):i.renderChartTable(e)})}(e=j({},e)).tableDetail=e.tableDetail||!1;var r,o,i=this;e.secondPopup?(r=$("#"+e.tableTplId),o=$("#secondPopupTable")):(r=i.$monitorContent.find(".config-table"),o=$("#"+e.tabName+"ChartTable")),e.tableDetail?(e.tableData.hasDetailBtn=!0,r.html(template("tplConfigTable",e.tableData)),a(),e.tableData.pagination&&n()):(e.tableData.hasDetailBtn=!1,r.html(template("tplConfigTable",e.tableData)),a(),e.tableData.pagination&&n());var l=null,c=(l=e.secondPopup?$("#popupPoorMonitorSecond"):i.$monitorContent).find(".page-content-wrap"),s=l.find(".monitor-tb-wrap"),d=c.data("jsp"),T=s.data("jsp");T?T.reinitialise():T=s.jScrollPane(commonJSPConfig).data("jsp"),d?d.reinitialise():d=c.jScrollPane(commonJSPConfig).data("jsp"),T.reinitialise()},configTableFun:{},renderSecondPopupTable:function(e,a){var t=this,n=$("#popupPoorMonitorSecond #paramsCheckArea"),r={},o=t.getWinType(),i=t.getCurTabType(),l={level:e.area_level,id:e.area_id,year:e.year,wintype:o,tabtype:i,page:e.table_page||1};e.tableDetail=!1,r=t.getCheckAreaActiveObj(n),showLoadingMask(),X({url:e.url,data:j(l,r),success:function(n){if(o==t.getWinType()&&i==t.getCurTabType()){var r=n.code,l=n.data;if(0==r&&l){var c=$("#popupPoorMonitorSecond");"area_data"==e.secondPopupType&&(l.hasSelectArea=!1,c.find(".basic-info-wrap").html(template("tplSecondPopupBasicInfo",l)),$("#secondPopupTitle").text(l.win_title)),t.renderConfigTable(j({},e,{secondPopup:!0,tableData:l.table,tableDetail:e.tableDetail,tableTplId:"secondPopupTable"})),$.isFunction(a)&&a()}hideLoadingMask()}},error:function(){hideLoadingMask()}})},renderConfigOrder:function(e){var a=this;e.url=URLS.URL_DATA_MONITOR_ORDER_TABLE,e.params_url=URLS.URL_DATA_MONITOR_ORDER_BASIC_INFO,$("#headDownloadTable").hasClass("hide")||a.renderHeadDownloadList(e),a.$monitorContent.html(template("tplConfigOrder")),a.buildConfigCheckArea(e)},renderSecondPopupDetailList:function(e){var a=this;e=j({},e,{url:URLS.URL_DATA_MONITOR_DETAIL_TABLE,params_url:URLS.URL_DATA_MONITOR_DETAIL_PARAMS_INFO,secondPopup:!0,secondPopupType:"detail_list"}),a.buildConfigCheckArea(e)},renderSecondPopupAreaData:function(e){var a=this;e=j({},e,{url:URLS.URL_DATA_MONITOR_AREA_DATA_TABLE,secondPopup:!0,secondPopupType:"area_data"}),a.renderSecondPopupTable(e)},renderHeadDownloadList:function(e){showLoadingMask(),X({url:URLS.URL_DATA_MONITOR_HEAD_DOWNLOAD_TABLE_LIST,data:{wintype:e.wintype,id:e.area_id,level:e.area_level,year:e.year},success:function(e){var a=e.code,t=e.data;if(0==a&&t){var n=$("#monitorHeader").find("#headDownloadTable");n.html(template("tplHeadDownloadTable",t)),n.removeClass("hide")}},error:function(){hideLoadingMask()}})},renderPoorChangeManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_POOR_CHANGE_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e),a.renderHeadDownloadList(e)},renderPoorChangeAnalysis:function(e){function a(){var a=$(this);e.url=URLS[a.data("url")],e.tplID="tplPoorChangeAnalysisChartTableNaturalChange",a.attr("data-tpl-id",e.tplID),a.siblings().removeClass("active"),a.addClass("active"),n.renderChartTable(e)}function t(){o.find(".radio[data-value=natural_change]").data("has-own-handler",!0).off(x,a).on(x,a)}var n=this,r="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_POOR_CHANGE_ANALYSIS_ALL,e.tableDetail=!0,e.chartTab="poorChangeAnalysisChartTrendAdd",n.$monitorContent.html(template(r)),n.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE,u.STATUS_ATTRIBUTE],{},t),n.renderChartTable(e,t),n.renderHeadDownloadList(e);var o=$("#"+e.tabName+"CheckArea")},renderResultPlanManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_RESULT_PLAN_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderResultResultAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_RESULT_RESULT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE]),a.renderChartTable(e)},renderResultNotSuccessAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_RESULT_NOT_SUCCESS_ANALYSIS,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE,u.SCORE,u.INCOME,u.GUARANTEE]),a.renderChartTable(e)},renderAverageIncomeIncomeManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_AVERAGE_INCOME_INCOME_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderAverageIncomeSuccessAnalysis:function(e){function a(){var a=$("#"+e.tabName+"ChartTable");$("#monitorHeader #secondTabTitle");a.find("#linkTransferredIncome").off("click").on("click",function(){t.bindSecondTab(e,L.SECONDTAB.SUCCESS_ANALYSIS_TRANSFERRED_INCOME)}),a.find("#linkTransferredPayment").off("click").on("click",function(){t.bindSecondTab(e,L.SECONDTAB.SUCCESS_ANALYSIS_TRANSFERRED_PAYMENT)})}var t=this,n="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_AVERAGE_INCOME_SUCCESS_ANALYSIS,e.tableDetail=!0,t.$monitorContent.html(template(n));var r={};r[u.LABOR_ATTRIBUTE]=h.HAVE_LABOR.value,t.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE],r,a),t.renderChartTable(e,a)},renderAverageIncomeSuccessAnalysisTransferredIncome:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_AVERAGE_INCOME_SUCCESS_ANALYSIS_TRANSFERRED_INCOME,e.tableDetail=!1,a.$monitorContent.html(template(t));var n={};n[u.LABOR_ATTRIBUTE]=h.HAVE_LABOR.value,a.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE],n),a.renderChartTable(e)},renderAverageIncomeSuccessAnalysisTransferredPayment:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_AVERAGE_INCOME_SUCCESS_ANALYSIS_TRANSFERRED_PAYMENT,e.tableDetail=!1,a.$monitorContent.html(template(t));var n={};n[u.LABOR_ATTRIBUTE]=h.HAVE_LABOR.value,a.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE],n),a.renderChartTable(e)},renderAverageIncomePoorAnalysis:function(e){function a(){var a=$("#"+e.tabName+"ChartTable");a.find("#poorAnalysisToTransferredIncome").on("click",function(){t.bindSecondTab(e,L.SECONDTAB.POOR_ANALYSIS_TRANSFERRED_INCOME)}),a.find("#poorAnalysisToTransferredPayment").on("click",function(){t.bindSecondTab(e,L.SECONDTAB.POOR_ANALYSIS_TRANSFERRED_PAYMENT)})}var t=this,n="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_AVERAGE_INCOME_POOR_ANALYSIS,e.tableDetail=!0,t.$monitorContent.html(template(n));var r={};r[u.LABOR_ATTRIBUTE]=h.HAVE_LABOR.value,t.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE],r,a),t.renderChartTable(e,a)},renderAverageIncomePoorAnalysisTransferredIncome:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_AVERAGE_INCOME_POOR_ANALYSIS_TRANSFERRED_INCOME,e.tableDetail=!1,a.$monitorContent.html(template(t));var n={};n[u.LABOR_ATTRIBUTE]=h.HAVE_LABOR.value,a.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE],n),a.renderChartTable(e)},renderAverageIncomePoorAnalysisTransferredPayment:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_AVERAGE_INCOME_POOR_ANALYSIS_TRANSFERRED_PAYMENT,e.tableDetail=!1,a.$monitorContent.html(template(t));var n={};n[u.LABOR_ATTRIBUTE]=h.HAVE_LABOR.value,a.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE],n),a.renderChartTable(e)},renderFiveLowImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_FIVE_LOW_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderFiveLowImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_FIVE_LOW_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE,{rowKey:u.POOR_ATTRIBUTE,checkArr:[_.ALL,_.LOW,_.FIVE,_.NO_LABOR]}]),a.renderChartTable(e)},renderEduImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_EDU_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderEduImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_EDU_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t));var n={};n[u.EDU_LEVELS]=m.COMPULSORY.value,a.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.EDU_LEVELS],n),a.renderChartTable(e)},renderMedicalPolicyImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_MONITOR_MEDICAL_POLICY_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderMedicalPolicyImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_MEDICAL_POLICY_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE]),a.renderChartTable(e)},renderHouseImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_HOUSE_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderHouseImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_HOUSE_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE]),a.renderChartTable(e)},renderRoadImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_ROAD_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderRoadImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_ROAD_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE]),a.renderChartTable(e)},renderWaterImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_WATER_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderWaterImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_WATER_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE]),a.renderChartTable(e)},renderElectricityImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_ELECTRICITY_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderElectricityImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_ELECTRICITY_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE]),a.renderChartTable(e)},renderMedicalFacilityImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_MEDICAL_FACILITY_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderMedicalFacilityImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_MEDICAL_FACILITY_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE]),a.renderChartTable(e)},renderBroadcastImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_BROADCAST_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderBroadcastImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_BROADCAST_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE]),a.renderChartTable(e)},renderNetImplementManagement:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_NET_IMPLEMENT_MANAGEMENT,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderNetImplementAnalysis:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_NET_IMPLEMENT_ANALYSIS,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.SCOPE]),a.renderChartTable(e)},renderPoorAnalysisPoorAnalysis:function(e){function a(){var a=$("#"+e.tabName+"ChartTable").find(".detail-btn");a.data("event-bound")||a.on(x,function(a){t.secondPopup.openDetail(e)}).data("event-bound",!0)}var t=this,n="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_POOR_ANALYSIS_POOR_ANALYSIS,e.renderTable=!1,t.$monitorContent.html(template(n)),t.buildCheckArea(e,[u.SCOPE,u.POOR_ATTRIBUTE,u.LABOR_ATTRIBUTE,u.POOR_REASON],{},a),t.renderChartTable(e,a)},renderAlarmedPoorExceptionMonitor:function(e){var a=this,t="tpl"+e.TabName,n=new Date;e.url=URLS.URL_DATA_MONITOR_ALARMED_POOR_EXCEPTION_MONITOR,n.getFullYear()==a.getCurYear()?e.tableDetail=!0:e.tableDetail=!1,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[u.EXCEPTION_TYPE]),a.renderChartTable(e)},renderAlarmedRecordsExceptionMonitor:function(e){var a=this,t="tpl"+e.TabName,n=new Date;e.url=URLS.URL_DATA_MONITOR_ALARMED_RECORDS_EXCEPTION_MONITOR,n.getFullYear()==a.getCurYear()?e.tableDetail=!0:e.tableDetail=!1,a.$monitorContent.html(template(t)),a.buildCheckArea(e,[{rowKey:u.EXCEPTION_TYPE,checkArr:[E.HOLDER_ID_MISS,E.MEMBER_ID_MISS,E.DISABLED_INFO_MISS,E.ID_REPEAT]}]),a.renderChartTable(e)},renderAlarmedMoneyMoneyMonitor:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_ALARMED_MONEY_EXCEPTION_MONITOR,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.renderChartTable(e)},renderAlarmedVisitVisitMonitor:function(e){var a=this,t="tpl"+e.TabName;e.url=URLS.URL_DATA_MONITOR_ALARMED_VISIT_EXCEPTION_MONITOR,e.tableDetail=!0,a.$monitorContent.html(template(t)),a.renderChartTable(e)}},$.dataMonitor.init()});