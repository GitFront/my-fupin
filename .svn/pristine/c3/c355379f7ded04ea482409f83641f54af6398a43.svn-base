$(function(){function n(){var n,e=o(),r=e.username,t=e.password,a=e.code;return r?t?a||(n="请输入验证码"):n="请输入密码":n="请输入用户名",n}function e(){var n=o();n.username||n.password||n.code?m.addClass(u):m.removeClass(u)}function o(){return{username:f(l.val()),password:p.val(),code:f(v.val()),remember_username:b.prop("checked")}}function r(n){C.text(n).show()}function t(){C.hide()}var a="click",s="input",c="disabled",u="focused",i=$.extend,d=function(n){$.ajax(i({dataType:"json",timeout:6e4},n))},f=$.trim,m=$("#formLogin"),l=$("#inputUsername"),p=$("#inputPassword"),v=$("#inputCode"),h=$("#imgCode"),C=$("#msgErr"),b=$("#checkboxRemember"),w=$("#btnSubmit");[a,s].forEach(function(n){m.on(n,function(){e()})}),e(),h.on(a,function(){var n=h.attr("data-src");h.attr("src",n+"?_="+Date.now())}),w.on(a,function(){function e(){w.removeClass(c)}if(!w.hasClass(c)){t();var o=n();o?r(o):(w.addClass(c),d({url:URLS.URL_LOGIN,type:"POST",success:function(n){var e=n.code,o=n.msg;0==e?location.href="":r(o)},error:function(){},complete:function(){e()}}))}})});