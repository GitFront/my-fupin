!function(t){var i=t.Axis,s=t.Chart,o=t.Color,e=t.Legend,a=t.LegendSymbolMixin,r=t.Series,n=t.getOptions(),l=t.each,h=t.extend,p=t.extendClass,d=t.merge,c=t.pick,u=t.seriesTypes,g=t.wrap,f=function(){},m=t.ColorAxis=function(){this.isColorAxis=!0,this.init.apply(this,arguments)};h(m.prototype,i.prototype),h(m.prototype,{defaultColorAxisOptions:{lineWidth:0,gridLineWidth:1,tickPixelInterval:72,startOnTick:!0,endOnTick:!0,offset:0,marker:{animation:{duration:50},color:"gray",width:.01},labels:{overflow:"justify"},minColor:"#EFEFFF",maxColor:"#003875",tickLength:5},init:function(t,s){var o,e="vertical"!==t.options.legend.layout;o=d(this.defaultColorAxisOptions,{side:e?2:1,reversed:!e},s,{isX:e,opposite:!e,showEmpty:!1,title:null,isColor:!0}),i.prototype.init.call(this,t,o),s.dataClasses&&this.initDataClasses(s),this.initStops(s),this.isXAxis=!0,this.horiz=e,this.zoomEnabled=!1},tweenColors:function(t,i,s){var o;return i.rgba.length&&t.rgba.length?(t=t.rgba,i=i.rgba,o=1!==i[3]||1!==t[3],t=(o?"rgba(":"rgb(")+Math.round(i[0]+(t[0]-i[0])*(1-s))+","+Math.round(i[1]+(t[1]-i[1])*(1-s))+","+Math.round(i[2]+(t[2]-i[2])*(1-s))+(o?","+(i[3]+(t[3]-i[3])*(1-s)):"")+")"):t=i.raw||"none",t},initDataClasses:function(t){var i,s=this,e=this.chart,a=0,r=this.options,n=t.dataClasses.length;this.dataClasses=i=[],this.legendItems=[],l(t.dataClasses,function(t,l){var h,t=d(t);i.push(t),t.color||("category"===r.dataClassColor?(h=e.options.colors,t.color=h[a++],a===h.length&&(a=0)):t.color=s.tweenColors(o(r.minColor),o(r.maxColor),n<2?.5:l/(n-1)))})},initStops:function(t){this.stops=t.stops||[[0,this.options.minColor],[1,this.options.maxColor]],l(this.stops,function(t){t.color=o(t[1])})},setOptions:function(t){i.prototype.setOptions.call(this,t),this.options.crosshair=this.options.marker,this.coll="colorAxis"},setAxisSize:function(){var t,i,s,o=this.legendSymbol,e=this.chart;o&&(this.left=t=o.attr("x"),this.top=i=o.attr("y"),this.width=s=o.attr("width"),this.height=o=o.attr("height"),this.right=e.chartWidth-t-s,this.bottom=e.chartHeight-i-o,this.len=this.horiz?s:o,this.pos=this.horiz?t:i)},toColor:function(t,i){var s,o,e,a,r=this.stops,n=this.dataClasses;if(n){for(a=n.length;a--;)if(e=n[a],o=e.from,r=e.to,(void 0===o||t>=o)&&(void 0===r||t<=r)){s=e.color,i&&(i.dataClass=a);break}}else{for(this.isLog&&(t=this.val2lin(t)),s=1-(this.max-t)/(this.max-this.min||1),a=r.length;a--&&!(s>r[a][0]););o=r[a]||r[a+1],s=1-((r=r[a+1]||o)[0]-s)/(r[0]-o[0]||1),s=this.tweenColors(o.color,r.color,s)}return s},getOffset:function(){var t=this.legendGroup,s=this.chart.axisOffset[this.side];t&&(i.prototype.getOffset.call(this),this.axisGroup.parentGroup||(this.axisGroup.add(t),this.gridGroup.add(t),this.labelGroup.add(t),this.added=!0,this.labelLeft=0,this.labelRight=this.width),this.chart.axisOffset[this.side]=s)},setLegendColor:function(){var t,i=this.options;t=this.reversed,t=this.horiz?[+t,0,+!t,0]:[0,+!t,0,+t],this.legendColor={linearGradient:{x1:t[0],y1:t[1],x2:t[2],y2:t[3]},stops:i.stops||[[0,i.minColor],[1,i.maxColor]]}},drawLegendSymbol:function(t,i){var s=t.padding,o=t.options,e=this.horiz,a=c(o.symbolWidth,e?200:12),r=c(o.symbolHeight,e?12:200),n=c(o.labelPadding,e?16:30),o=c(o.itemDistance,10);this.setLegendColor(),i.legendSymbol=this.chart.renderer.rect(0,t.baseline-11,a,r).attr({zIndex:1}).add(i.legendGroup),i.legendSymbol.getBBox(),this.legendItemWidth=a+s+(e?o:n),this.legendItemHeight=r+s+(e?n:0)},setState:f,visible:!0,setVisible:f,getSeriesExtremes:function(){var t;this.series.length&&(t=this.series[0],this.dataMin=t.valueMin,this.dataMax=t.valueMax)},drawCrosshair:function(t,s){var o,e=s&&s.plotX,a=s&&s.plotY,r=this.pos,n=this.len;s&&((o=this.toPixels(s[s.series.colorKey]))<r?o=r-2:o>r+n&&(o=r+n+2),s.plotX=o,s.plotY=this.len-o,i.prototype.drawCrosshair.call(this,t,s),s.plotX=e,s.plotY=a,this.cross&&this.cross.attr({fill:this.crosshair.color}).add(this.legendGroup))},getPlotLinePath:function(t,s,o,e,a){return"number"==typeof a?this.horiz?["M",a-4,this.top-6,"L",a+4,this.top-6,a,this.top,"Z"]:["M",this.left,a,"L",this.left-6,a+6,this.left-6,a-6,"Z"]:i.prototype.getPlotLinePath.call(this,t,s,o,e)},update:function(t,s){var o=this.chart,e=o.legend;l(this.series,function(t){t.isDirtyData=!0}),t.dataClasses&&(l(e.allItems,function(t){t.isDataClass&&t.legendGroup.destroy()}),o.isDirtyLegend=!0),o.options[this.coll]=d(this.userOptions,t),i.prototype.update.call(this,t,s),this.legendItem&&(this.setLegendColor(),e.colorizeItem(this,!0))},getDataClassLegendSymbols:function(){var i,s=this,o=this.chart,e=this.legendItems,r=o.options.legend,n=r.valueDecimals,p=r.valueSuffix||"";return e.length||l(this.dataClasses,function(r,d){var c=!0,u=r.from,g=r.to;i="",void 0===u?i="< ":void 0===g&&(i="> "),void 0!==u&&(i+=t.numberFormat(u,n)+p),void 0!==u&&void 0!==g&&(i+=" - "),void 0!==g&&(i+=t.numberFormat(g,n)+p),e.push(h({chart:o,name:i,options:{},drawLegendSymbol:a.drawRectangle,visible:!0,setState:f,isDataClass:!0,setVisible:function(){c=this.visible=!c,l(s.series,function(t){l(t.points,function(t){t.dataClass===d&&t.setVisible(c)})}),o.legend.colorizeItem(this,c)}},r))}),e},name:""}),l(["fill","stroke"],function(t){HighchartsAdapter.addAnimSetter(t,function(i){i.elem.attr(t,m.prototype.tweenColors(o(i.start),o(i.end),i.pos))})}),g(s.prototype,"getAxes",function(t){var i=this.options.colorAxis;t.call(this),this.colorAxis=[],i&&new m(this,i)}),g(e.prototype,"getAllItems",function(t){var i=[],s=this.chart.colorAxis[0];return s&&(s.options.dataClasses?i=i.concat(s.getDataClassLegendSymbols()):i.push(s),l(s.series,function(t){t.options.showInLegend=!1})),i.concat(t.call(this))}),s={pointAttrToOptions:{stroke:"borderColor","stroke-width":"borderWidth",fill:"color",dashstyle:"dashStyle"},pointArrayMap:["value"],axisTypes:["xAxis","yAxis","colorAxis"],optionalAxis:"colorAxis",trackerGroups:["group","markerGroup","dataLabelsGroup"],getSymbol:f,parallelArrays:["x","y","value"],colorKey:"value",translateColors:function(){var t=this,i=this.options.nullColor,s=this.colorAxis,o=this.colorKey;l(this.data,function(e){var a=e[o];(a=null===a?i:s&&void 0!==a?s.toColor(a,e):e.color||t.color)&&(e.color=a)})}},n.plotOptions.heatmap=d(n.plotOptions.scatter,{animation:!1,borderWidth:0,nullColor:"#F8F8F8",dataLabels:{formatter:function(){return this.point.value},inside:!0,verticalAlign:"middle",crop:!1,overflow:!1,padding:0},marker:null,pointRange:null,tooltip:{pointFormat:"{point.x}, {point.y}: {point.value}<br/>"},states:{normal:{animation:!0},hover:{halo:!1,brightness:.2}}}),u.heatmap=p(u.scatter,d(s,{type:"heatmap",pointArrayMap:["y","value"],hasPointSpecificOptions:!0,supportsDrilldown:!0,getExtremesFromAll:!0,directTouch:!0,init:function(){var t;u.scatter.prototype.init.apply(this,arguments),t=this.options,this.pointRange=t.pointRange=c(t.pointRange,t.colsize||1),this.yAxis.axisPointRange=t.rowsize||1},translate:function(){var t=this.options,i=this.xAxis,s=this.yAxis;this.generatePoints(),l(this.points,function(o){var e=(t.colsize||1)/2,a=(t.rowsize||1)/2,r=Math.round(i.len-i.translate(o.x-e,0,1,0,1)),e=Math.round(i.len-i.translate(o.x+e,0,1,0,1)),n=Math.round(s.translate(o.y-a,0,1,0,1)),a=Math.round(s.translate(o.y+a,0,1,0,1));o.plotX=o.clientX=(r+e)/2,o.plotY=(n+a)/2,o.shapeType="rect",o.shapeArgs={x:Math.min(r,e),y:Math.min(n,a),width:Math.abs(e-r),height:Math.abs(a-n)}}),this.translateColors(),this.chart.hasRendered&&l(this.points,function(t){t.shapeArgs.fill=t.options.color||t.color})},drawPoints:u.column.prototype.drawPoints,animate:f,getBox:f,drawLegendSymbol:a.drawRectangle,getExtremes:function(){r.prototype.getExtremes.call(this,this.valueData),this.valueMin=this.dataMin,this.valueMax=this.dataMax,r.prototype.getExtremes.call(this)}}))}(Highcharts);