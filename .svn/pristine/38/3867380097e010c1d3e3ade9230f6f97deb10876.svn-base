function liquidFillGaugeDefaultSettings(){return{minValue:0,maxValue:100,circleThickness:.05,circleFillGap:.05,circleColor:"#178BCA",waveHeight:.05,waveCount:1,waveRiseTime:1e3,waveAnimateTime:18e3,waveRise:!0,waveHeightScaling:!0,waveAnimate:!0,waveColor:"#178BCA",waveOffset:0,textVertPosition:.5,textSize:1,valueCountUp:!0,displayPercent:!0,textColor:"#045681",waveTextColor:"#A4DBf8"}}function loadLiquidFillGauge(t,a,e){function n(){D.attr("transform","translate("+I(D.attr("T"))+",0)"),D.transition().duration(e.waveAnimateTime*(1-D.attr("T"))).ease("linear").attr("transform","translate("+I(1)+",0)").attr("T",1).each("end",function(){D.attr("T",0),n(e.waveAnimateTime)})}null==e&&(e=liquidFillGaugeDefaultSettings());var r,i=d3.select("#"+t),l=Math.min(parseInt(i.style("width")),parseInt(i.style("height")))/2,o=parseInt(i.style("width"))/2-l,s=parseInt(i.style("height"))/2-l,u=Math.max(e.minValue,Math.min(e.maxValue,a))/e.maxValue;r=e.waveHeightScaling?d3.scale.linear().range([0,e.waveHeight,0]).domain([0,50,100]):d3.scale.linear().range([e.waveHeight,e.waveHeight]).domain([0,100]);var d=e.textSize*l/2,c=parseFloat(a).toFixed(2),m=e.valueCountUp?e.minValue:c,v=e.displayPercent?"%":"",p=e.circleThickness*l,f=p+e.circleFillGap*l,x=l-f,h=x*r(100*u),w=2*x/e.waveCount,g=1+e.waveCount,F=w*g,T=function(t){return Math.round(t)};parseFloat(c)!=parseFloat(T(c))&&(T=function(t){return parseFloat(t).toFixed(1)}),parseFloat(c)!=parseFloat(T(c))&&(T=function(t){return parseFloat(t).toFixed(2)});for(var C=[],y=0;y<=40*g;y++)C.push({x:y/(40*g),y:y/40});var M=d3.scale.linear().range([0,2*Math.PI]).domain([0,1]),A=d3.scale.linear().range([0,l]).domain([0,l]),P=d3.scale.linear().range([0,F]).domain([0,1]),R=d3.scale.linear().range([0,h]).domain([0,1]),V=d3.scale.linear().range([f+2*x+h,f-h]).domain([0,1]),I=d3.scale.linear().range([0,F-2*x]).domain([0,1]),G=d3.scale.linear().range([f+2*x,f+.7*d]).domain([0,1]),H=i.append("g").attr("transform","translate("+o+","+s+")"),S=d3.svg.arc().startAngle(M(0)).endAngle(M(1)).outerRadius(A(l)).innerRadius(A(l-p));H.append("path").attr("d",S).style("fill",e.circleColor).attr("transform","translate("+l+","+l+")");var q=H.append("text").text(T(m)+v).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",d+"px").style("fill",e.textColor).attr("transform","translate("+l+","+G(e.textVertPosition)+")"),z=d3.svg.area().x(function(t){return P(t.x)}).y0(function(t){return R(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*t.y*Math.PI))}).y1(function(t){return 2*x+h}),B=H.append("defs").append("clipPath").attr("id","clipWave"+t),D=B.append("path").datum(C).attr("d",z).attr("T",0),O=H.append("g").attr("clip-path","url(#clipWave"+t+")");O.append("circle").attr("cx",l).attr("cy",l).attr("r",x).style("fill",e.waveColor);var U=O.append("text").text(T(m)+v).attr("class","liquidFillGaugeText").attr("text-anchor","middle").attr("font-size",d+"px").style("fill",e.waveTextColor).attr("transform","translate("+l+","+G(e.textVertPosition)+")");if(e.valueCountUp){var k=function(){var t=d3.interpolate(this.textContent,c);return function(a){this.textContent=T(t(a))+v}};q.transition().duration(e.waveRiseTime).tween("text",k),U.transition().duration(e.waveRiseTime).tween("text",k)}var W=f+2*x-F;return e.waveRise?B.attr("transform","translate("+W+","+V(0)+")").transition().duration(e.waveRiseTime).attr("transform","translate("+W+","+V(u)+")").each("start",function(){D.attr("transform","translate(1,0)")}):B.attr("transform","translate("+W+","+V(u)+")"),e.waveAnimate&&n(),new function(){this.update=function(t){var a=parseFloat(t).toFixed(2),i=function(t){return Math.round(t)};parseFloat(a)!=parseFloat(i(a))&&(i=function(t){return parseFloat(t).toFixed(1)}),parseFloat(a)!=parseFloat(i(a))&&(i=function(t){return parseFloat(t).toFixed(2)});var l=function(){var a=d3.interpolate(this.textContent,parseFloat(t).toFixed(2));return function(t){this.textContent=i(a(t))+v}};q.transition().duration(e.waveRiseTime).tween("text",l),U.transition().duration(e.waveRiseTime).tween("text",l);var o,s=Math.max(e.minValue,Math.min(e.maxValue,t))/e.maxValue,u=x*r(100*s),d=d3.scale.linear().range([f+2*x+u,f-u]).domain([0,1])(s),c=d3.scale.linear().range([0,F]).domain([0,1]),m=d3.scale.linear().range([0,u]).domain([0,1]);o=e.waveHeightScaling?d3.svg.area().x(function(t){return c(t.x)}).y0(function(t){return m(Math.sin(2*Math.PI*e.waveOffset*-1+2*Math.PI*(1-e.waveCount)+2*t.y*Math.PI))}).y1(function(t){return 2*x+u}):z;var p=e.waveAnimate?I(1):0;D.transition().duration(0).transition().duration(e.waveAnimate?e.waveAnimateTime*(1-D.attr("T")):e.waveRiseTime).ease("linear").attr("d",o).attr("transform","translate("+p+",0)").attr("T","1").each("end",function(){e.waveAnimate&&(D.attr("transform","translate("+I(0)+",0)"),n(e.waveAnimateTime))}),B.transition().duration(e.waveRiseTime).attr("transform","translate("+W+","+d+")")}}}